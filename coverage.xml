<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<style>body{background-color:white;}</style>
<script src="lib/htmlwidgets-1.6.1/htmlwidgets.js"></script>
<link href="lib/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="lib/datatables-binding-0.27/datatables.js"></script>
<script src="lib/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="lib/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="lib/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="lib/dt-core-1.12.1/js/jquery.dataTables.min.js"></script>
<link href="lib/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="lib/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="lib/highlight.js-6.2/rstudio.css" rel="stylesheet" />
<script src="lib/highlight.js-6.2/highlight.pack.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="lib/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<link href="lib/bootstrap-3.3.5/css/bootstrap-theme.min.css" rel="stylesheet" />
<script src="lib/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="lib/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="lib/bootstrap-3.3.5/shim/respond.min.js"></script>

</head>
<body>
<div class="container-fluid">
  <style type="text/css">table tr:hover td {
  font-weight:bold;text-decoration:none
}
table tr.covered td{
  background-color:rgba(95,151,68,0.3)
}

table tr:hover.covered .num{
  background-color:rgba(95,151,68,0.7)
}
table tr.missed td{
  background-color:rgba(185,73,71,0.3)
}
table tr:hover.missed .num{
  background-color:rgba(185,73,71,0.7)
}

table tr.missed:hover td{
  -webkit-box-shadow:0 -2px 0 0 #b94947 inset;
  -moz-box-shadow:0 -2px 0 0 #b94947 inset;
  box-shadow:0 -2px 0 0 #b94947 inset
}
table tr.covered:hover td{
  -webkit-box-shadow:0 -2px 0 0 #5f9744 inset;
  -moz-box-shadow:0 -2px 0 0 #5f9744 inset;
  box-shadow:0 -2px 0 0 #5f9744 inset
}

table tr.never td{
  background-color:transparent
}

table tbody {
  border-style: solid;
  border: 1px solid rgba(0,0,0,0.1)
}

table .num {
  border-right: 1px solid rgba(0,0,0,0.1)
}

td.coverage em {
  opacity: 0.5;
}

table td.coverage {
  border-right: 1px solid rgba(0,0,0,0.1);
  font-weight: bold;
  text-align: center;
}
table.table-condensed pre {
  background-color: transparent;
  margin: 0;
  padding: 0;
  border: 0;
  font-size: 11px;
}
div#files td {
  padding: 0;
  padding-left: 5px;
}

div#files td.num {
  padding-right: 5px;
}

table.table-condensed {
  font-size: 11px;
}</style>
  <div class="col-md-8 col-md-offset-2">
    <h2>gcamreport coverage - 70.76%</h2>
    <div class="tabbable">
      <ul class="nav nav-tabs" data-tabsetid="covr">
        <li class="active">
          <a href="#tab-covr-1" data-toggle="tab" data-value="Files">Files</a>
        </li>
        <li>
          <a href="#tab-covr-2" data-toggle="tab" data-value="Source">Source</a>
        </li>
      </ul>
      <div class="tab-content" data-tabsetid="covr">
        <div class="tab-pane active" title="Files" data-value="Files" id="tab-covr-1">
          <div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-f1a2dcf86ac4ca9079d2" style="width:100%;height:500px;"></div>
          <script type="application/json" data-for="htmlwidget-f1a2dcf86ac4ca9079d2">{"x":{"filter":"none","vertical":false,"fillContainer":false,"data":[["<a href=\"#\">R/app_functions.R<\/a>","<a href=\"#\">R/functions.R<\/a>","<a href=\"#\">R/main.R<\/a>"],[375,1805,354],[140,944,142],[53,703,114],[87,241,28],["239","4","25"],["37.86%","74.47%","80.28%"]],"container":"<table class=\"row-border\">\n  <thead>\n    <tr>\n      <th>File<\/th>\n      <th>Lines<\/th>\n      <th>Relevant<\/th>\n      <th>Covered<\/th>\n      <th>Missed<\/th>\n      <th>Hits / Line<\/th>\n      <th>Coverage<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"dom":"t","paging":false,"columnDefs":[{"targets":6,"createdCell":"function(td, cellData, rowData, row, col) {\n  var percent = cellData.replace(\"%\", \"\");\n  if (percent > 90) {\n    var grad = \"linear-gradient(90deg, #edfde7 \" + cellData + \", white \" + cellData + \")\";\n  } else if (percent > 75) {\n    var grad = \"linear-gradient(90deg, #f9ffe5 \" + cellData + \", white \" + cellData + \")\";\n  } else {\n    var grad = \"linear-gradient(90deg, #fcece9 \" + cellData + \", white \" + cellData + \")\";\n  }\n  $(td).css(\"background\", grad);\n}\n"},{"className":"dt-right","targets":[1,2,3,4]}],"order":[],"autoWidth":false,"orderClasses":false},"callback":"function(table) {\ntable.on('click.dt', 'a', function() {\n  files = $('div#files div');\n  files.not('div.hidden').addClass('hidden');\n  id = $(this).text();\n  files.filter('div[id=\\'' + id + '\\']').removeClass('hidden');\n  $('ul.nav a[data-value=Source]').text(id).tab('show');\n});\n}","selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":["options.columnDefs.0.createdCell","callback"],"jsHooks":[]}</script>
        </div>
        <div class="tab-pane" title="Source" data-value="Source" id="tab-covr-2">
          <div id="files">
            <div id="R/app_functions.R" class="hidden">
              <table class="table-condensed">
                <tbody>
                  <tr class="never">
                    <td class="num">1</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#########################################################################</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">2</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#                         APP ANCILLARY FUNCTIONS                       #</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">3</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#########################################################################</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">4</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">5</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">6</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' compute_height</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">7</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">8</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Return perfect heigh of rendered plots with ungrouped regions</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">9</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param reg_all: regions' vector</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">10</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords internal</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">11</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @importFrom magrittr %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">12</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">13</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">compute_height &lt;- function(reg_all) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">14</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  reg_clean = setdiff(reg_all, c('MAF','LAM','OECD90','REF','ASIA'))</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">15</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  h = dplyr::if_else(length(reg_clean) &lt; 3, 325, 160*ceiling(sqrt(length(reg_clean))))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">16</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">17</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  return(h)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">18</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">19</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">20</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">21</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' is_leaf</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">22</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">23</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Return TRUE if it is a leaf node; FALSE otherwise.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">24</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param tree: tree node to be checked</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">25</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords internal</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">26</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @importFrom magrittr %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">27</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">28</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">is_leaf &lt;- function(tree) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">29</td>
                    <td class="coverage">38<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (length(tree) &gt; 1 || length(tree[[1]]) &gt; 1 || length(tree[[1]][[1]]) &gt; 1 || length(tree[[1]][[1]][[1]]) &gt; 1</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">30</td>
                    <td class="coverage">38<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      || length(tree[[1]][[1]][[1]][[1]]) &gt; 1 || length(tree[[1]][[1]][[1]][[1]][[1]]) &gt; 1 || length(tree[[1]][[1]][[1]][[1]][[1]][[1]]) &gt; 1) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">31</td>
                    <td class="coverage">5<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    return(FALSE)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">32</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">33</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">34</td>
                    <td class="coverage">33<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  return(TRUE)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">35</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">36</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">37</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">38</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' change_style</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">39</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">40</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Change the style of the tree nodes: 'dis' if needs to be disabled, 'basic' otherwise.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">41</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param tree: base tree to change the style on</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">42</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param type: either regions or variables</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">43</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param tmp_vars: variables which require 'dis' style</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">44</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords internal</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">45</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @importFrom magrittr %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">46</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">47</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">change_style &lt;- function(tree, type, tmp_vars = NULL) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">48</td>
                    <td class="coverage">6<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  n = length(tree)</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">49</td>
                    <td class="coverage">6<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  for (i in 1:n) {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">50</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # get the attributes for the current node</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">51</td>
                    <td class="coverage">38<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    attrs &lt;- attributes(tree[[i]])</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">52</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">53</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # check if the current node has children</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">54</td>
                    <td class="coverage">38<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    if (!is_leaf(tree[[i]])) {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">55</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      # Recursively call the function on the children of the current node</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">56</td>
                    <td class="coverage">5<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      tree[[i]] &lt;- change_style(tree[[i]], type, tmp_vars)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">57</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">58</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">59</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # change the style for the current node. If it's in the list of variables to be disabled, set</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">60</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # it to 'dis'. To 'basic' otherwise</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">61</td>
                    <td class="coverage">38<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    if (type == 'variables' &amp;&amp; length(tmp_vars) &gt; 0 &amp;&amp; attrs$my_id %in% tmp_vars) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">62</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">      attrs$sttype = 'dis'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">63</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    } else {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">64</td>
                    <td class="coverage">38<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      attrs$sttype = 'basic'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">65</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    }</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">66</td>
                    <td class="coverage">38<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    attributes(tree[[i]]) &lt;- attrs</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">67</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">68</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">69</td>
                    <td class="coverage">6<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  return(tree)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">70</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">71</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">72</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">73</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' check_user_choices_plot</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">74</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">75</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Check user's choices to do the plot: at least one scenario, variable, year, and region</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">76</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' must be chosen. In case of 'grouped' plot, all variables must be from the same category.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">77</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param scen: user's selected scenarios</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">78</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param years: user's selected years</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">79</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param reg: user's selected regions</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">80</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param vars: user's selected variables</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">81</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param grouped: if TRUE, aim to display grouped plot; ungrouped plot otherwise</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">82</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords internal</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">83</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @importFrom magrittr %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">84</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">85</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">check_user_choices_plot &lt;- function(vars, scen, years, reg, grouped) {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">86</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">87</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # errors' vector</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">88</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  error_message = c()</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">89</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">90</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # study the category of the selected variables</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">91</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (length(vars) &gt; 0) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">92</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    check_vars = sub("\\|.*", "", stringr::str_extract(vars, "(.*?)(\\||$)"))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">93</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  } else {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">94</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    check_vars = NULL</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">95</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">96</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">97</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # check that at least one scenario has been choosen</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">98</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (length(unique(scen)) &lt; 1) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">99</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    error_message &lt;- c(error_message,"ERROR: Select at least one scenario please.")</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">100</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">101</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # check that at least one year has been choosen</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">102</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (length(unique(years)) &lt; 1) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">103</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    error_message &lt;- c(error_message,"ERROR: Select at least one year please.")</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">104</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">105</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # check that at least one region has been choosen</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">106</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (length(unique(reg)) &lt; 1) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">107</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    error_message &lt;- c(error_message,"ERROR: Select at least one region please.")</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">108</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">109</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # check that at least one variable has been choosen</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">110</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (length(unique(check_vars)) &lt; 1) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">111</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    error_message &lt;- c(error_message,"ERROR: Select at least one variable please.")</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">112</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">113</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # in case of grouped-variables' plot, check that at only variables from the same category have been choosen</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">114</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (grouped &amp; length(unique(check_vars)) &gt; 1) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">115</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    error_message &lt;- c(error_message,"ERROR: Select only variables from the same category please.")</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">116</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">117</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">118</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  return(error_message)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">119</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">120</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">121</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' update_user_choices_plot</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">122</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">123</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Update dataframe to display plots with the user's choices</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">124</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param selected_scen: user's selected scenarios</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">125</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param selected_years: user's selected years</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">126</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param tree_regions: user's selected regions</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">127</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param tree_variables: user's selected variables</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">128</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param sidebarItemExpanded: input sidebar expanded item</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">129</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords internal</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">130</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @importFrom magrittr %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">131</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">132</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">update_user_choices_plot &lt;- function(selected_scen, selected_years,</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">133</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                     tree_regions, tree_variables, sidebarItemExpanded) {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">134</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # get selected regions and variables from input</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">135</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  sel_reg_ini = shinyTree::get_selected(tree_regions, format = 'slices')</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">136</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  sel_vars_ini = shinyTree::get_selected(tree_variables, format = 'slices')</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">137</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">138</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  basic_reg = 0</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">139</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  basic_vars = 0</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">140</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # if it's the first time loading regions and there is a sidebarItem expanded different than regions, choose all possible regions</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">141</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (firstReg &amp;&amp; ((!is.null(sidebarItemExpanded) &amp;&amp; sidebarItemExpanded != "Regions") || is.null(sidebarItemExpanded))) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">142</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    sel_reg_ini = reg_cont$region</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">143</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    basic_reg = 1</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">144</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">145</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">146</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # if it's the first time loading variables and there is a sidebarItem expanded different than variables, choose all possible variables</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">147</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (firstVars &amp;&amp; ((!is.null(sidebarItemExpanded) &amp;&amp; sidebarItemExpanded != "Variables") || is.null(sidebarItemExpanded))) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">148</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    sel_vars_ini = unique(cols$col1)</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">149</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    basic_vars = 1</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">150</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">151</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">152</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # if there are no selected regions</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">153</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (noReg) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">154</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    noReg &lt;&lt;- FALSE</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">155</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    sel_reg_ini = c()</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">156</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    basic_reg = 2</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">157</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">158</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">159</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # if there are no selected variables</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">160</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (noVars) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">161</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    noVars &lt;&lt;- FALSE</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">162</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    sel_vars_ini = c()</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">163</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    basic_vars = 2</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">164</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">165</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">166</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # set firstVars and/or firstReg to FALSE if it's not the first time loading them or if their sidebarItem is expanded</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">167</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  firstVars &lt;&lt;- ifelse(!firstVars || (firstVars &amp;&amp; !is.null(sidebarItemExpanded) &amp;&amp; sidebarItemExpanded == "Variables"), FALSE, TRUE)</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">168</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  firstReg &lt;&lt;- ifelse(!firstReg || (firstReg &amp;&amp; !is.null(sidebarItemExpanded) &amp;&amp; sidebarItemExpanded == "Regions"), FALSE, TRUE)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">169</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">170</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # transform the regions and variables' structures to lists</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">171</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (is.list(sel_vars_ini) &amp; length(sel_vars_ini) &gt; 0) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">172</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    sel_vars = do_unmount_tree(sel_vars_ini, 'variables')</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">173</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  } else {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">174</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    sel_vars = sel_vars_ini</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">175</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">176</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (is.list(sel_reg_ini) &amp; length(sel_reg_ini) &gt; 0) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">177</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    sel_reg = do_unmount_tree(sel_reg_ini, 'regions')</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">178</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  } else {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">179</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    sel_reg = sel_reg_ini</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">180</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">181</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">182</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # consider all possible columns</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">183</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  sel_cols = c('Model', 'Scenario', 'Region', 'Variable', 'Unit')</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">184</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">185</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  toret = list(</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">186</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    'scen' = selected_scen,</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">187</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    'years' = selected_years,</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">188</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    'cols' = sel_cols,</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">189</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    'vars_ini' = sel_vars_ini,</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">190</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    'reg_ini' = sel_reg_ini,</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">191</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    'vars' = sel_vars,</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">192</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    'reg' = sel_reg,</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">193</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    'basic_reg' = basic_reg,</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">194</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    'basic_vars' = basic_vars</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">195</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  )</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">196</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  return(toret)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">197</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">198</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">199</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">200</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' reset_first_load</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">201</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">202</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Initialize variables to run the app</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">203</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords internal</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">204</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @importFrom magrittr %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">205</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">206</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">reset_first_load &lt;- function() {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">207</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  tree_reg &lt;&lt;- do_mount_tree(reg_cont,names(reg_cont),selec=TRUE)</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">208</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  cols &lt;&lt;- unique(sdata[, grepl('col', names(sdata))])</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">209</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  tree_vars &lt;&lt;- do_mount_tree(cols,names(cols),selec=TRUE)</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">210</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  firstLoad &lt;&lt;- TRUE</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">211</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  firstReg &lt;&lt;- TRUE</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">212</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  firstVars &lt;&lt;- TRUE</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">213</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  noReg &lt;&lt;- FALSE</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">214</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  noVars &lt;&lt;- FALSE</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">215</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  updatedVars &lt;&lt;- FALSE</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">216</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  all_vars &lt;&lt;- do_collapse_df(cols)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">217</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">218</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">219</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">220</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' do_data_sample</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">221</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">222</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Function to subset a dataset with the user's choices</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">223</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param sdata: dataset</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">224</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param sel_scen: selected scenario/s</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">225</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param sel_years: selected year/s</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">226</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param sel_cols: selected column/s</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">227</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param sel_vars: selected variables in tree</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">228</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param sel_reg: selected regions in tree</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">229</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords internal</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">230</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @importFrom magrittr %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">231</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return subseted dataset</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">232</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">233</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">do_data_sample &lt;- function(sdata,sel_scen,sel_years,sel_cols,sel_vars,sel_reg,</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">234</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                           basic_reg, basic_vars) {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">235</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # obtain the region's list</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">236</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (basic_reg == 1) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">237</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    reg = unique(sdata$Region)</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">238</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  } else if (basic_reg == 2 || (is.list(sel_reg) &amp;&amp; length(sel_reg) == 0)) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">239</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    reg = c()</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">240</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  } else {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">241</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    reg = do_unmount_tree(sel_reg, 'regions')</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">242</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">243</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">244</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # obtain the variables's list</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">245</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (basic_vars == 1) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">246</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    vars = unique(sdata$Variable)</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">247</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  } else if (basic_vars == 2 || (is.list(sel_vars) &amp;&amp; length(sel_vars) == 0)) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">248</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    vars = c()</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">249</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  } else{</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">250</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    vars = do_unmount_tree(sel_vars, 'variables')</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">251</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">252</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">253</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # subset the data</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">254</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  data_sample = sdata %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">255</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(Scenario %in% sel_scen) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">256</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(Variable %in% vars) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">257</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(Region %in% reg) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">258</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(c(sel_cols, sel_years)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">259</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    data.table::as.data.table()</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">260</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">261</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  return(data_sample)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">262</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">263</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">264</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">265</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">266</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' do_mount_tree</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">267</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">268</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Recursive function to create a nested list from a dataframe.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">269</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param df: dataset</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">270</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param column_names: names of the columns of the original dataset</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">271</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param current_column: number of the current column</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">272</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords internal</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">273</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @importFrom magrittr %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">274</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return nested list</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">275</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">276</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">do_mount_tree &lt;- function(df, column_names, current_column = 1, selec = TRUE, iid = NULL) {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">277</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # filter the data frame to include only rows with the current level</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">278</td>
                    <td class="coverage">2168<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  filtered_df &lt;- df[!is.na(df[[column_names[current_column]]]), ]</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">279</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">280</td>
                    <td class="coverage">2168<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (nrow(filtered_df) == 0) {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">281</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # base case: if there are no more rows, return an empty list</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">282</td>
                    <td class="coverage">1464<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    return("")</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">283</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  } else {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">284</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # create a list for the current level</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">285</td>
                    <td class="coverage">704<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    current_list &lt;- list()</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">286</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">287</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # loop over the unique values in the current column</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">288</td>
                    <td class="coverage">704<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    for (value in unique(filtered_df[[column_names[current_column]]])) {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">289</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      # create a nested list for the next level</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">290</td>
                    <td class="coverage">2160<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      filtered_df_tmp = filtered_df[filtered_df[[column_names[current_column]]] == value,]</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">291</td>
                    <td class="coverage">2160<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      if (!is.null(iid)) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">292</td>
                    <td class="coverage">2056<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">        tmp_id = paste(iid, value, sep = '|')</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">293</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      } else {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">294</td>
                    <td class="coverage">104<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">        tmp_id = value</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">295</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      }</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">296</td>
                    <td class="coverage">2160<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      next_list &lt;- do_mount_tree(filtered_df_tmp, column_names, current_column = current_column + 1, selec, tmp_id)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">297</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">298</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      # add the nested list to the current level with the appropriate attributes</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">299</td>
                    <td class="coverage">2160<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      current_list[[value]] &lt;- structure(next_list,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">300</td>
                    <td class="coverage">2160<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                         sttype="basic",</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">301</td>
                    <td class="coverage">2160<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                         stopened=FALSE,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">302</td>
                    <td class="coverage">2160<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                         sticon="glyphicon glyphicon-plus",</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">303</td>
                    <td class="coverage">2160<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                         stselected=selec,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">304</td>
                    <td class="coverage">2160<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                         my_id=tmp_id)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">305</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">306</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">307</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # add the current level to the list with the appropriate attributes</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">308</td>
                    <td class="coverage">704<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    structure(current_list,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">309</td>
                    <td class="coverage">704<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">              sttype="basic",</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">310</td>
                    <td class="coverage">704<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">              stopened=FALSE,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">311</td>
                    <td class="coverage">704<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">              sticon="glyphicon glyphicon-plus",</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">312</td>
                    <td class="coverage">704<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">              stselected=selec,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">313</td>
                    <td class="coverage">704<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">              my_id=tmp_id)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">314</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">315</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">316</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">317</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">318</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' do_unmount_tree</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">319</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">320</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Create a dataframe from a nested list.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">321</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param base_tree: nested list</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">322</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param type: 'variables' if nested list is refereed to variables, 'regions'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">323</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' if it refers to regional  aggregation</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">324</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords internal</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">325</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @importFrom magrittr %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">326</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return dataframe</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">327</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">328</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">do_unmount_tree &lt;- function(base_tree, type) {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">329</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">330</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (length(base_tree) &gt; 0) {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">331</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # transform dataset to list of items with delimiter |</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">332</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    ll = rrapply::rrapply(</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">333</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">      base_tree,</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">334</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">      classes = "numeric",</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">335</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">      how = "flatten",</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">336</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">      options = list(namesep = "|", simplify = FALSE)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">337</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    )</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">338</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    ll = names(ll)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">339</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">340</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # keep only the the string after the first delimiter appearance</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">341</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    extract_string &lt;- function(x) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">342</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">      split_string &lt;- strsplit(x, "\\|")[[1]]</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">343</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">      if (type == 'variables') {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">344</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">        paste(split_string[2:length(split_string)], collapse = "|")</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">345</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">      } else if (type == 'regions') {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">346</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">        split_string &lt;- strsplit(x, "\\|")[[1]][length(split_string)]</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">347</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">        split_string &lt;- na.omit(split_string)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">348</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">349</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    }</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">350</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    extracted_list &lt;- c(unlist(lapply(ll, extract_string)))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">351</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">352</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    return(extracted_list)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">353</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">354</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  return(a)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">355</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">356</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">357</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">358</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' do_collapse_df</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">359</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">360</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Collapse all columns by row of the dataframe and remove NA</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">361</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param basic_data: dataframe/datatable to be collapsed</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">362</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return Vector with the collapsed data</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">363</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords internal</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">364</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @importFrom magrittr %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">365</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">366</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">do_collapse_df &lt;- function(basic_data) {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">367</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # collapse all columns by row</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">368</td>
                    <td class="coverage">4<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  df_collapsed &lt;- data.frame(collapsed = apply(basic_data, 1, paste, collapse = "|"))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">369</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">370</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # remove 'NA' pattern</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">371</td>
                    <td class="coverage">4<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  df_clean &lt;- apply(df_collapsed, c(1), function(x) gsub("\\|NA", "", x)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">372</td>
                    <td class="coverage">4<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    as.vector()</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">373</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">374</td>
                    <td class="coverage">4<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  return(df_clean)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">375</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div id="R/functions.R" class="hidden">
              <table class="table-condensed">
                <tbody>
                  <tr class="never">
                    <td class="num">1</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">library(usethis)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">2</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">library(magrittr)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">3</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">options(dplyr.summarise.inform = FALSE)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">4</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">5</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#########################################################################</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">6</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#                           ANCILLARY FUNCTIONS                         #</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">7</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#########################################################################</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">8</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">9</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' conv_ghg_co2e</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">10</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">11</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Covert GHG to CO2e</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">12</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">13</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">conv_ghg_co2e &lt;- function (data) {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">14</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">15</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # Ancillary function</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">16</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # GHG emission conversion</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">17</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  F_GASES &lt;- c("C2F6", "CF4", "HFC125", "HFC134a", "HFC245fa", "SF6", "HFC143a", "HFC152a", "HFC227ea", "HFC23", "HFC236fa", "HFC32", "HFC365mfc", "HFC43",</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">18</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">               "HFC245fa", "HFC43-10")</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">19</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  GHG_gases &lt;- c("CH4", "N2O", F_GASES, "CO2", "CO2LUC")</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">20</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">21</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  data %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">22</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::separate(ghg, into = c("variable", "sector"), sep = "_", fill = "right") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">23</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(variable %in% GHG_gases) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">24</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(GWP_adjuster, by = c("variable" = "GHG_gases")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">25</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * GWP, Units = "CO2e") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">26</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(-GWP) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">27</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    return()</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">28</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">29</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">30</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' conv_EJ_TWh</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">31</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">32</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Covert capacity to generation</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">33</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">34</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">conv_EJ_TWh &lt;- function (data, EJ){</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">35</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  data %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">36</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(TWh = EJ / EJ_to_GWh / 1000)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">37</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">38</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">39</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' conv_TWh_EJ</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">40</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">41</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Covert TWh to EJ</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">42</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">43</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">conv_TWh_EJ &lt;- function (data, TWh){</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">44</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  data %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">45</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(EJ = TWh * EJ_to_GWh * 1000)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">46</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">47</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">48</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' conv_GW_EJ</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">49</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">50</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Covert GW to EJ</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">51</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">52</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">conv_GW_EJ &lt;- function (data, cf, GW){</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">53</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # Elec related conversions</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">54</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  hr_per_yr &lt;- 8760</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">55</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  EJ_to_GWh &lt;- 0.0000036</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">56</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">57</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  data %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">58</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(EJ = GW * (cf * hr_per_yr * EJ_to_GWh))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">59</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">60</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">61</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' conv_EJ_GW</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">62</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">63</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Covert EJ to GW</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">64</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">65</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">conv_EJ_GW &lt;- function (data, cf, EJ){</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">66</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # Elec related conversions</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">67</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  hr_per_yr &lt;- 8760</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">68</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  EJ_to_GWh &lt;- 0.0000036</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">69</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">70</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  data %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">71</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(gw = EJ / (cf * hr_per_yr * EJ_to_GWh))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">72</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">73</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">74</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' approx_fun</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">75</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">76</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Interpolation function</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">77</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">78</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">approx_fun &lt;- function(year, value, rule = 1) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">79</td>
                    <td class="coverage">832<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if(rule == 1 | rule == 2) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">80</td>
                    <td class="coverage">832<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tryCatch(stats::approx(as.vector(year), value, rule = rule, xout = year)$y,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">81</td>
                    <td class="coverage">832<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">             error = function(e) NA)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">82</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">83</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  } else {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">84</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    stop("Use fill_exp_decay_extrapolate!")</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">85</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">86</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">87</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">88</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' firstup</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">89</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">90</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Capitalizes the first letter of every variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">91</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">92</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">firstup &lt;- function(x) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">93</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  x &lt;- tolower(x)</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">94</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  substr(x, 1, 1) &lt;- toupper(substr(x, 1, 1))</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">95</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  x</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">96</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">97</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">98</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' gather_map</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">99</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">100</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Formats all maps into a long table</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">101</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">102</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">gather_map &lt;- function(df){</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">103</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  untouched_cols &lt;- names(df) %&gt;% .[!grepl("var", names(df))]</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">104</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  df %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">105</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::gather(identifier, var, -untouched_cols) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">106</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(-identifier) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">107</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!is.na(var), var != "") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">108</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    return()</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">109</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">110</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">111</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' standard_tech_group</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">112</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">113</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' technologies categorization</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">114</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">115</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">standard_tech_group &lt;- function(data, technology) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">116</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  data %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">117</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(tech = technology,</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">118</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  tech = replace(tech, grepl("wind", technology), "wind"),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">119</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  tech = replace(tech, grepl("biomass", technology), "biomass"),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">120</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  tech = replace(tech, grepl("PV", technology), "solar"),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">121</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  tech = replace(tech, grepl("pv", technology), "solar"),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">122</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  tech = replace(tech, grepl("CSP", technology), "solar"),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">123</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  tech = replace(tech, grepl("geothermal", technology), "geothermal"),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">124</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  tech = replace(tech, grepl("hydro", technology), "hydro"),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">125</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  tech = replace(tech, grepl("Gen", technology), "nuclear"),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">126</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  tech = replace(tech, grepl("coal", technology), "coal"),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">127</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  tech = replace(tech, grepl("gas", technology), "gas"),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">128</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  tech = replace(tech, grepl("refined liquids", technology), "oil"),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">129</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  tech = replace(tech, grepl("oil", technology), "oil"),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">130</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  tech = replace(tech, grepl("CCS", technology), paste(tech[grepl("CCS", technology)], "ccs", sep = " w/ "))) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">131</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(tech = factor(tech, levels = tech.list))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">132</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">133</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">134</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#########################################################################</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">135</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#                         LOAD QUERIES FUNCTIONS                        #</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">136</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#########################################################################</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">137</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">138</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># Scioeconomics</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">139</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># ==============================================================================================</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">140</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_population</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">141</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">142</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get population query and change units to [million].</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">143</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords population rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">144</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return population_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">145</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">146</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_population = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">147</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  population_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">148</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "population by region") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">149</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * conv_thousand_million,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">150</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  var = "Population") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">151</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">152</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">153</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">154</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">155</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_gdp_ppp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">156</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">157</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get GDP (PPP) query, compute regional GDP, and change units to [10USD].</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">158</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords GDP rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">159</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return GDP_PPP_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">160</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">161</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_gdp_ppp = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">162</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  GDP_PPP_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">163</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "GDP per capita PPP by region") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">164</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(population_clean %&gt;% dplyr::rename(pop_mill = value), by = c("scenario", "region", "year")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">165</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * pop_mill * conv_90USD_10USD,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">166</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  var = "GDP|PPP") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">167</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">168</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">169</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">170</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">171</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_gdp_mer</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">172</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">173</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get GDP (MER) query and change units to [10USD].</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">174</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords GDP rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">175</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return GDP_MER_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">176</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">177</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_gdp_mer = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">178</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  GDP_MER_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">179</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "GDP MER by region") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">180</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * conv_million_billion * conv_90USD_10USD,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">181</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  var = "GDP|MER") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">182</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">183</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">184</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">185</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># Climate and emissions</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">186</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># ==============================================================================================</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">187</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_forcing</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">188</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">189</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get World's forcing query.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">190</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords forcing rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">191</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return forcing_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">192</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">193</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_forcing = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">194</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  forcing_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">195</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "total climate forcing") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">196</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(year %in% GCAM_years) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">197</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(var = "Forcing", region = "World") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">198</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">199</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">200</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">201</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">202</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_temperature</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">203</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">204</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get World's mean temperature query.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">205</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords temperature rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">206</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return global_temp_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">207</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">208</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_temperature = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">209</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  global_temp_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">210</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "global mean temperature") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">211</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(year %in% GCAM_years) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">212</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(var = "Temperature|Global Mean", region = "World") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">213</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">214</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">215</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">216</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">217</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_co2_concentration</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">218</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">219</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get World's CO2 concentration query.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">220</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords co2 rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">221</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return co2_concentration_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">222</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">223</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_co2_concentration = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">224</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  co2_concentration_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">225</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "CO2 concentrations") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">226</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(year %in% GCAM_years) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">227</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(var = "Concentration|CO2", region = "World") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">228</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">229</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">230</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">231</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">232</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_co2</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">233</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">234</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get World's CO2 emissions query.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">235</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords co2 rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">236</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return co2_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">237</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">238</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_co2 = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">239</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  co2_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">240</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tibble::as_tibble(rgcam::getQuery(prj, "CO2 emissions by sector (no bio)")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">241</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(co2_sector_map, by = "sector", multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">242</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * unit_conv) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">243</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, year, var) %&gt;% #</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">244</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">245</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">246</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">247</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">248</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">249</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">250</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># Get CO2 emissions by tech, to break out ships vs rail vs aviation</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">251</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># and to get Emissions|CO2|Energy| Coal vs Gas vs Oil.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">252</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># Must create CO2 emissions by tech (no bio) output first to be consistent. There is no query for this</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">253</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">254</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># Apply bio negative emissions by joining by sector and by sector (no bio) and finding share of non-bio emissions</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">255</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">256</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_nonbio_tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">257</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">258</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get no bio CO2 emissions query by sector.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">259</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords co2 rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">260</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return nonbio_share global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">261</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">262</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_nonbio_tmp = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">263</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  nonbio_share &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">264</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "CO2 emissions by sector") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">265</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(rgcam::getQuery(prj, "CO2 emissions by sector (no bio)"), by = c("region", "scenario", "year", "sector", "Units")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">266</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value.y = dplyr::if_else(is.na(value.y), value.x, value.y),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">267</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  percent = value.y/value.x) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">268</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(-value.x, -value.y)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">269</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">270</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">271</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">272</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_co2_tech_nobio_tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">273</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">274</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get no bio CO2 emissions query by sector and techonolgy.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">275</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords co2 rgcam::getQuery tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">276</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return co2_tech_nobio global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">277</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">278</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_co2_tech_nobio_tmp = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">279</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  co2_tech_nobio &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">280</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "CO2 emissions by tech") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">281</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(nonbio_share, by = c("region", "scenario", "year", "sector", "Units")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">282</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value*percent) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">283</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(-percent)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">284</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">285</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">286</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">287</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_co2_tech_emissions_tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">288</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">289</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get no bio CO2 emissions query by sector, subsector, and techonolgy.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">290</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords co2 rgcam::getQuery tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">291</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return co2_tech_emissions global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">292</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">293</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_co2_tech_emissions_tmp = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">294</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  co2_tech_emissions &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">295</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    co2_tech_nobio %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">296</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(co2_tech_map, by = c("sector", "subsector", "technology"), multiple = "all")  %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">297</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!is.na(var)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">298</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * unit_conv) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">299</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, year, var) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">300</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">301</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">302</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">303</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">304</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">305</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">306</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># Iron and Steel Emissions: for Emissions|CO2|Coal, Gas, Oil</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">307</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># Find which input has the greatest share for each IRONSTL tech (between coal, gas, oil)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">308</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">309</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_iron_steel_map</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">310</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">311</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get iron and steel emissions.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">312</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords iron steel rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">313</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return iron_steel_map global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">314</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">315</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_iron_steel_map = function() {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">316</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  iron_steel_map &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">317</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "industry final energy by tech and fuel") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">318</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(sector == "iron and steel",</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">319</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  input %in% c("wholesale gas", "refined liquids industrial", "delivered coal")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">320</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(max = max(value),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">321</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  save = dplyr::if_else(value == max, 1, 0)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">322</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(save == 1) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">323</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">324</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(-save, -max, -Units, -scenario, -value)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">325</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">326</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">327</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">328</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_co2_iron_steel</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">329</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">330</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get iron and steel CO2 emissions.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">331</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords iron steel co2 rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">332</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return co2_tech_ironsteel global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">333</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">334</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_co2_iron_steel = function() {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">335</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  co2_tech_ironsteel &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">336</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    co2_tech_nobio %&gt;% #Using redistributed bio version</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">337</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(sector == "iron and steel") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">338</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(iron_steel_map, by = c("sector", "subsector", "technology", "year", "region")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">339</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(input = str_replace(input, "wholesale gas", "Emissions|CO2|Energy|Gas"),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">340</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  input = str_replace(input, "refined liquids industrial", "Emissions|CO2|Energy|Oil"),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">341</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  input = str_replace(input,	"delivered coal", "Emissions|CO2|Energy|Coal")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">342</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::rename(var = input) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">343</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * conv_C_CO2) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">344</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, year, var) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">345</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">346</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">347</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    na.omit() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">348</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">349</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">350</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">351</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">352</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_lu_co2</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">353</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">354</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get land use CO2 emissions.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">355</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords lu co2 rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">356</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return LU_carbon_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">357</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">358</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_lu_co2 = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">359</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  LU_carbon_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">360</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # Land use CO2</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">361</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "LUC emissions by region") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">362</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # dplyr::filter(scenario == "Reference") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">363</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(year %in% GCAM_years) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">364</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">365</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">366</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">367</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * conv_C_CO2,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">368</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  var = "Emissions|CO2|AFOLU") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">369</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">370</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # dplyr::filter(scenario==scen1) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">371</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario,var,year)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">372</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">373</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">374</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">375</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_co2_emissions</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">376</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">377</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Combine CO2 emission queries.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">378</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords co2 process</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">379</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return co2_emissions_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">380</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">381</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_co2_emissions = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">382</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  co2_emissions_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">383</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(co2_clean, LU_carbon_clean, co2_tech_emissions) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">384</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, year, var) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">385</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">386</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">387</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">388</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">389</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">390</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_total_co2_emissions</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">391</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">392</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Compute total CO2 emission.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">393</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords co2 process</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">394</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return tot_co2_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">395</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">396</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_total_co2_emissions = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">397</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  tot_co2_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">398</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(co2_clean %&gt;% dplyr::filter(var == "Emissions|CO2|Energy and Industrial Processes"), LU_carbon_clean) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">399</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">400</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">401</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">402</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(var = "Emissions|CO2") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">403</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">404</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">405</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">406</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">407</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_nonco2_emissions</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">408</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">409</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get non CO2 emissions query.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">410</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords nonco2 rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">411</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return nonco2_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">412</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">413</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_nonco2_emissions = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">414</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  nonco2_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">415</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "nonCO2 emissions by sector") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">416</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(nonco2_emis_sector_map, by = c("ghg", "sector"), multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">417</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(rgcam::getQuery(prj, "nonCO2 emissions by resource production") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">418</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::left_join(nonco2_emis_resource_map, by = c("ghg", "resource"), multiple = "all")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">419</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * unit_conv) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">420</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, year, var) %&gt;% #</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">421</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">422</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup()%&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">423</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">424</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">425</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">426</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_fgas</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">427</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">428</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Compute F-Gases emissions.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">429</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords f-gases process</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">430</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return f_gas_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">431</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">432</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_fgas = function() {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">433</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  f_gas_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">434</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "nonCO2 emissions by region") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">435</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    conv_ghg_co2e() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">436</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(variable %in% F_GASES) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">437</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">438</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">439</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">440</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(var = "Emissions|F-Gases") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">441</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">442</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">443</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">444</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">445</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_ghg</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">446</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">447</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get total GHG emissions.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">448</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords ghg rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">449</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return ghg_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">450</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">451</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_ghg = function() {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">452</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  ghg_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">453</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "nonCO2 emissions by region") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">454</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    conv_ghg_co2e() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">455</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(variable %in% GHG_gases) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">456</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(LU_carbon_clean) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">457</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">458</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">459</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">460</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(var = "Emissions|Kyoto Gases") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">461</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">462</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">463</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">464</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">465</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_ghg_sector</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">466</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">467</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get sectorial GHG emissions.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">468</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords ghg rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">469</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return ghg_sector_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">470</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">471</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_ghg_sector = function() {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">472</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  ghg_sector_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">473</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "nonCO2 emissions by sector")  %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">474</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!grepl("CO2", ghg)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">475</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(rgcam::getQuery(prj, "nonCO2 emissions by resource production") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">476</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::rename(sector = resource) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">477</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::select(-subresource)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">478</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(rgcam::getQuery(prj, "CO2 emissions by sector (no bio)") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">479</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::mutate(ghg = "CO2")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">480</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(subsector = sector) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">481</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    conv_ghg_co2e() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">482</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(variable %in% GHG_gases) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">483</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::rename(ghg = variable) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">484</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(kyoto_sector_map) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">485</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">486</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(LU_carbon_clean %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">487</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::mutate(var = "Emissions|Kyoto Gases"),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">488</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                     LU_carbon_clean %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">489</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::mutate(var = "Emissions|Kyoto Gases|AFOLU")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">490</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, var, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">491</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">492</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup()</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">493</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">494</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">495</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">496</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_co2_sequestration</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">497</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">498</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get carbon sequestration.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">499</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords co2 rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">500</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return co2_sequestration_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">501</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">502</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_co2_sequestration = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">503</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  co2_sequestration_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">504</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "CO2 sequestration by tech") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">505</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(carbon_seq_tech_map, by = c("sector", "technology"), multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">506</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::complete(tidyr::nesting(scenario,region, year),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">507</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    var = unique(var),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">508</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    fill = list(value = 0)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">509</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!is.na(var)) %&gt;% #, var!= "Carbon Sequestration|Feedstocks",var != "Carbon Sequestration|Feedstocks|Liquids") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">510</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * unit_conv) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">511</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, year, var) %&gt;% #</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">512</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">513</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;% #tidyr::spread(year, value) -&gt; d</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">514</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">515</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">516</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">517</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">518</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># Agriculture and land use</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">519</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># ==============================================================================================</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">520</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_ag_demand</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">521</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">522</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get agricultural demand.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">523</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords ag rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">524</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return ag_demand_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">525</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">526</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_ag_demand = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">527</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  ag_demand_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">528</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(rgcam::getQuery(prj, "demand balances by crop commodity"),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">529</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                     rgcam::getQuery(prj, "demand balances by meat and dairy commodity")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">530</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # Adjust OtherMeat_Fish</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">531</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(sector = dplyr::if_else(sector == "FoodDemand_NonStaples" &amp; input == "OtherMeat_Fish", "OtherMeat_Fish", sector)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">532</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(ag_demand_map, by = c("sector"), multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">533</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!is.na(var)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">534</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * unit_conv) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">535</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, year, var) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">536</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">537</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">538</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">539</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">540</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">541</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">542</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_ag_production</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">543</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">544</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get agricultural production.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">545</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords ag rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">546</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return ag_production_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">547</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">548</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_ag_production = function() {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">549</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  ag_production_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">550</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "ag production by crop type") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">551</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(Units == "Mt") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">552</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # Forests produce in units of billion m3 and biomass produces in EJ. We'll need to find a conversion factor to include it</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">553</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # 1 m3 = .001 tons</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">554</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(var = "Agricultural Production") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">555</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, year, var) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">556</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">557</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">558</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">559</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">560</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">561</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">562</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_land</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">563</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">564</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get land use area.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">565</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords ag rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">566</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return land_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">567</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">568</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_land = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">569</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  land_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">570</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "aggregated land allocation") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">571</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(land_use_map, by = c("landleaf"), multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">572</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * unit_conv) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">573</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, year, var) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">574</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">575</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup()</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">576</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">577</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">578</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">579</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># Primary Energy</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">580</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># ==============================================================================================</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">581</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_primary_energy</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">582</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">583</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get primary energy consumption by tech.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">584</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords energy rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">585</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return primary_energy_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">586</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">587</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_primary_energy = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">588</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  primary_energy_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">589</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "primary energy consumption with CCS by region (direct equivalent)") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">590</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!grepl("water", fuel),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">591</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  Units == "EJ") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">592</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(primary_energy_map, by = c("fuel"), multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">593</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!is.na(var)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">594</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * unit_conv) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">595</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, year, var) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">596</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">597</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup()  %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">598</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::complete(tidyr::nesting(scenario,region, year),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">599</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    var = unique(var),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">600</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    fill = list(value = 0)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">601</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">602</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">603</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">604</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">605</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_energy_trade_prod</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">606</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">607</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get energy trade.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">608</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords energy rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">609</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return energy_trade_prod global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">610</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">611</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_energy_trade_prod = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">612</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  energy_trade_prod &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">613</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "resource production") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">614</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(Units == "EJ") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">615</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(resource %in% c("coal", "natural gas", "crude oil", "unconventional oil")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">616</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(resource = sub("crude oil", "oil", resource),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">617</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  resource = sub("unconventional oil", "oil", resource)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">618</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, resource, region, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">619</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(production = sum(value)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">620</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup()</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">621</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">622</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">623</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">624</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_energy_trade_tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">625</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">626</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get energy trade supply. Query used to compute other variables.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">627</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords energy rgcam::getQuery tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">628</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return energy_trade_supply global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">629</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">630</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_energy_trade_tmp = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">631</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  energy_trade_supply &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">632</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "supply of all markets") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">633</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(grepl("regional coal", market) | grepl("regional natural gas", market) | grepl("regional oil", market)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">634</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::separate(market, into = c("region", "resource"), sep = "regional ", fill = "right") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">635</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(resource != "oilpalm", resource != "oilcrop") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">636</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, resource, region, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">637</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(demand = sum(value)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">638</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup()</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">639</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">640</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">641</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">642</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_energy_trade</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">643</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">644</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get energy trade supply.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">645</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords energy rgcam::getQuery tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">646</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return energy_trade_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">647</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">648</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_energy_trade = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">649</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  energy_trade_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">650</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    energy_trade_prod %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">651</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(energy_trade_supply, by = c("scenario", "resource", "region", "year")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">652</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = production - demand,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">653</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  resource = sub("coal", "Coal", resource),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">654</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  resource = sub("natural gas", "Gas", resource),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">655</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  resource = sub("oil", "Oil", resource),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">656</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  var = paste0("Trade|Primary Energy|", resource, "|Volume")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">657</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">658</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">659</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">660</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># Secondary Energy</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">661</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># ==============================================================================================</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">662</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_elec_gen_tech</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">663</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">664</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get electricity generation</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">665</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords electricity rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">666</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return elec_gen_tech_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">667</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">668</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_elec_gen_tech = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">669</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  elec_gen_tech_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">670</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "elec gen by gen tech") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">671</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(elec_gen_map, by = c("output", "subsector", "technology"), multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">672</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!is.na(var)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">673</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * unit_conv) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">674</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, year, var) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">675</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">676</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">677</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::complete(tidyr::nesting(scenario,region, year),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">678</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    var = unique(var),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">679</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    fill = list(value = 0)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">680</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">681</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">682</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">683</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">684</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_secondary_solids</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">685</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">686</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get secondary solids</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">687</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords energy rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">688</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return secondary_solids global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">689</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">690</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_secondary_solids = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">691</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  secondary_solids &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">692</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj,"inputs by sector") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">693</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(input %in% c("delivered biomass", "delivered coal")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">694</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, year, input) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">695</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">696</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">697</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(var = ifelse(input == "delivered biomass", "Secondary Energy|Solids|Biomass",</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">698</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                               "Secondary Energy|Solids|Coal")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">699</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(rgcam::getQuery(prj,"inputs by sector") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">700</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::filter(input %in% c("delivered biomass", "delivered coal")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">701</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::group_by(scenario, region, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">702</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">703</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">704</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::mutate(var = "Secondary Energy|Solids")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">705</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">706</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">707</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">708</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">709</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_se_gen_tech</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">710</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">711</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get other secondary energy production</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">712</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords energy rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">713</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return se_gen_tech_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">714</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">715</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_se_gen_tech = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">716</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  se_gen_tech_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">717</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(rgcam::getQuery(prj, "gas production by tech"),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">718</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                     rgcam::getQuery(prj, "hydrogen production by tech"),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">719</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                     rgcam::getQuery(prj, "refined liquids production by tech")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">720</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(se_gen_map, by = c("sector", "subsector", "technology"), multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">721</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!is.na(var)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">722</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * unit_conv) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">723</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, year, var) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">724</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">725</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">726</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::complete(tidyr::nesting(scenario,region, year),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">727</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    var = unique(var),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">728</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    fill = list(value = 0)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">729</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">730</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(secondary_solids)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">731</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">732</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">733</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">734</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># Final Energy</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">735</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># ==============================================================================================</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">736</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># demand by sector by technology</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">737</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">738</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_fe_sector_tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">739</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">740</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get final energy demand by sector</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">741</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords energy rgcam::getQuery tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">742</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return fe_sector global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">743</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">744</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_fe_sector_tmp = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">745</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  fe_sector &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">746</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "final energy consumption by sector and fuel") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">747</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(final_energy_map, by = c("sector", "input"), multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">748</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!is.na(var)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">749</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * unit_conv) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">750</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, year, var) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">751</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">752</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">753</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::complete(tidyr::nesting(scenario,region, year),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">754</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    var = unique(var),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">755</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    fill = list(value = 0)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">756</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">757</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">758</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">759</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">760</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_fe_transportation_tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">761</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">762</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get mode-specific transport final energy to break out rail, ship, and domestic air.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">763</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords energy rgcam::getQuery tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">764</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return fe_transportation global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">765</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">766</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_fe_transportation_tmp = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">767</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  fe_transportation &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">768</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "transport final energy by mode and fuel") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">769</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(transport_final_en_map, by = c("sector", "input", "mode"), multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">770</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!is.na(var)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">771</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * unit_conv) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">772</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, year, var) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">773</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">774</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                 na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">775</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">776</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::complete(tidyr::nesting(scenario,region, year),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">777</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    var = unique(var),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">778</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    fill = list(value = 0)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">779</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">780</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">781</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">782</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">783</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_fe_sector</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">784</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">785</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Compute final energy.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">786</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' GPK 1/6/2022 - because some reporting categories are mapped from both the sector-level and subsector-level queries,</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">787</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' we need a step of aggregation here. For example, international and domestic air are both assigned to</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">788</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' aviation; international is mapped from the sector-level query, and domestic is mapped from the subsector (mode).</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">789</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Without this step there would be duplicate entries with different data for the same reporting categories.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">790</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords energy process</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">791</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return fe_sector_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">792</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">793</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_fe_sector = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">794</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  fe_sector_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">795</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(fe_sector, fe_transportation) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">796</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, var, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">797</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">798</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup()</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">799</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">800</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">801</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">802</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># Energy Service ----------------------------------------------------------</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">803</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">804</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_energy_service_transportation</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">805</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">806</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get transport.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">807</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords energy rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">808</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return energy_service_transportation_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">809</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">810</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_energy_service_transportation = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">811</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  energy_service_transportation_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">812</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "transport service output by mode") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">813</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(transport_en_service, by = c("sector", "mode"), multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">814</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!is.na(var)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">815</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * unit_conv) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">816</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, year, var) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">817</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">818</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">819</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">820</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">821</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">822</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">823</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_energy_service_buildings</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">824</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">825</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get ES buildings.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">826</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords energy rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">827</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return energy_service_buildings_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">828</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">829</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_energy_service_buildings = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">830</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  energy_service_buildings_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">831</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "building floorspace") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">832</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(buildings_en_service, by = c("building"), multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">833</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!is.na(var)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">834</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * unit_conv) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">835</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, year, var) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">836</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">837</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">838</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">839</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">840</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">841</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">842</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">843</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># industry production</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">844</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># could add chemicals but they're in terms of EJ, need to also add cement</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">845</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">846</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_industry_production</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">847</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">848</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get industry production.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">849</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords energy rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">850</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return industry_production_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">851</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">852</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_industry_production = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">853</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  industry_production_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">854</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "industry primary output by sector") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">855</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(production_map, by = c("sector")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">856</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # dplyr::filter variables that are in terms of Mt</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">857</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(var %in% c("Production|Cement", "Production|Steel", "Production|Non-ferrous metals"))%&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">858</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, var, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">859</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">860</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">861</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">862</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">863</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">864</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">865</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># Prices</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">866</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># ==============================================================================================</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">867</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_ag_prices_wld_tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">868</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">869</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get ag price index.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">870</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords ag rgcam::getQuery tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">871</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return ag_prices_wld global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">872</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">873</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_ag_prices_wld_tmp = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">874</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  ag_prices_wld &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">875</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "prices by sector") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">876</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(ag_prices_map, by = c("sector")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">877</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!is.na(var)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">878</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, sector, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">879</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = mean(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">880</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">881</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(region = "World")</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">882</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">883</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">884</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_ag_prices</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">885</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">886</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Calculate average mean for ag global index</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">887</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords ag rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">888</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return ag_prices_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">889</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">890</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_ag_prices = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">891</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  ag_prices_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">892</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "prices by sector") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">893</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(ag_prices_wld) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">894</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(ag_prices_map, by = c("sector")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">895</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!is.na(var)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">896</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, sector) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">897</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * unit_conv / value[year == 2005]) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">898</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">899</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">900</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">901</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">902</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">903</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># carbon price</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">904</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># sectoral CO2 prices are the same for all scenarios except for d_rap</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">905</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># CO2 prices are global except for d_delfrag</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">906</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">907</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#calculate co2 price for all scenarios except for d_rap and d_delfrag</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">908</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">909</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_price_var_tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">910</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">911</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get price variables to compute carbon price.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">912</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords internal tmp process</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">913</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return price_var global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">914</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">915</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_price_var_tmp = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">916</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  price_var &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">917</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    unique(co2_market_frag_map$var)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">918</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">919</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">920</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">921</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_regions_tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">922</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">923</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get regions to compute carbon price.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">924</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords internal tmp process</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">925</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return regions global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">926</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">927</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_regions_tmp = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">928</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  regions &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">929</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    unique(CO2_market$region)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">930</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">931</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">932</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">933</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_regions_weight_tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">934</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">935</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get regions weights to compute carbon price.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">936</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords internal tmp process</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">937</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return region_weight global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">938</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">939</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_regions_weight_tmp = function() {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">940</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # for scenarios w/ different regional carbon prices, weigh regional price by final energy to get global CO2 price</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">941</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  region_weight &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">942</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    fe_sector_clean %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">943</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(var == "Final Energy") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">944</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">945</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(weight = value/sum(value)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">946</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">947</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(-value, -var)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">948</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">949</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">950</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">951</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_co2_price_global_tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">952</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">953</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get global co2 price.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">954</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords co2 rgcam::getQuery tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">955</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return co2_price_global &amp; regions global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">956</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">957</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_co2_price_global_tmp = function() {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">958</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">959</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  co2_price_global_pre &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">960</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "CO2 prices") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">961</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(market == "globalCO2")</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">962</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">963</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if(nrow(co2_price_global_pre) &gt; 1) {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">964</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">965</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    co2_price_global &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">966</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      tibble::as_tibble(co2_price_global_pre) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">967</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      dplyr::mutate(value = value / conv_C_CO2 * conv_90USD_10USD) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">968</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      dplyr::mutate(market = gsub("global", "", market)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">969</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      dplyr::left_join(co2_market_frag_map, by = "market", multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">970</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      dplyr::filter(value != 0) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">971</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      tidyr::expand_grid(tibble::tibble(region = regions)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">972</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">973</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">974</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  } else {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">975</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">976</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    co2_price_global &lt;&lt;- NULL</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">977</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">978</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">979</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">980</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">981</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">982</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">983</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_co2_price_fragmented_tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">984</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">985</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get fragmented co2 price.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">986</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords co2 rgcam::getQuery tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">987</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return co2_price_fragmented global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">988</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">989</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_co2_price_fragmented_tmp = function() {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">990</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">991</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  co2_price_fragmented_pre &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">992</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "CO2 prices") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">993</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!grepl("LUC", market)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">994</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(market != "globalCO2")</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">995</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">996</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if(nrow(co2_price_fragmented_pre) &gt; 1) {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">997</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">998</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  co2_price_fragmented &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">999</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    co2_price_fragmented_pre %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1000</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(CO2_market, by = c("market"), multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1001</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(stats::complete.cases(.)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1002</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value / conv_C_CO2 * conv_90USD_10USD) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1003</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(market_adj = "CO2",</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1004</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  market_adj = dplyr::if_else(grepl("ETS", market), "CO2_ETS", market_adj),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1005</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  market_adj = dplyr::if_else(grepl("CO2BLD", market), "CO2BLD", market_adj),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1006</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  market_adj = dplyr::if_else(grepl("CO2IND", market), "CO2_ETS", market_adj),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1007</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  market_adj = dplyr::if_else(grepl("CO2TRAN", market), "CO2TRAN", market_adj)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1008</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(market = market_adj) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1009</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(-market_adj) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1010</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(co2_market_frag_map, by = "market", multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1011</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(stats::complete.cases(.)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1012</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::complete(tidyr::nesting(scenario, var, year, market, Units), region = regions, fill = list(value = 0)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1013</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1014</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1015</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  } else {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1016</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1017</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    co2_price_fragmented &lt;&lt;- NULL</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1018</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1019</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1020</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1021</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1022</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1023</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1024</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_co2_price</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1025</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1026</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get co2 price.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1027</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords co2 rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1028</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return co2_price_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1029</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1030</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_co2_price = function() {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1031</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1032</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  co2_price_clean_pre &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1033</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(co2_price_global, co2_price_fragmented)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1034</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1035</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if(nrow(co2_price_clean_pre) &lt; 1) {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1036</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1037</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    co2_price_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1038</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">      tibble::tibble(var = unique(co2_market_frag_map$var)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1039</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">      tidyr::expand_grid(tibble::tibble(scenario = unique(fe_sector_clean$scenario))) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1040</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">      tidyr::expand_grid(tibble::tibble(year = unique(fe_sector_clean$year))) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1041</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">      tidyr::expand_grid(tibble::tibble(region = c(unique(fe_sector_clean$region), "Global"))) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1042</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">      dplyr::mutate(value = 0) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1043</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">      dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1044</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1045</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  } else {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1046</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1047</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    co2_price_clean &lt;&lt;- co2_price_clean_pre %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1048</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      tidyr::complete(tidyr::nesting(region, var, year), scenario = unique(fe_sector_clean$scenario), fill = list(value = 0)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1049</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1050</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1051</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1052</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1053</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1054</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1055</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_gov_revenue_sector</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1056</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1057</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get overall carbon revenue.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1058</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords revenue rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1059</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return gov_revenue_sector global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1060</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1061</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_gov_revenue_sector = function() {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1062</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  gov_revenue_sector &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1063</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    co2_clean %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1064</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(sector  = ifelse(var == "Emissions|CO2|Energy|Demand|Industry", "Carbon|Demand|Industry", NA ),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1065</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  sector = ifelse(var == "Emissions|CO2|Energy|Demand|Residential and Commercial", "Carbon|Demand|Buildings", sector ),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1066</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  sector = ifelse(var == "Emissions|CO2|Energy|Demand|Transportation", "Carbon|Demand|Transport", sector ),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1067</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  sector = ifelse(var == "Emissions|CO2|Energy|Supply|Electricity", "Carbon|Supply", sector ),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1068</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  emiss = value) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1069</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(-var, -value) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1070</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!is.na(sector)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1071</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(co2_price_clean %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1072</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::mutate(sector  = ifelse(var == "Price|Carbon|Demand|Industry", "Carbon|Demand|Industry", NA ),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1073</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                     sector  = ifelse(var == "Price|Carbon|Demand|Residential and Commercial", "Carbon|Demand|Buildings", sector ),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1074</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                     sector  = ifelse(var == "Price|Carbon|Demand|Transportation", "Carbon|Demand|Transport", sector ),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1075</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                     sector  = ifelse(var == "Price|Carbon|Supply", "Carbon|Supply", sector )) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1076</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::select(-var),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1077</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                     by = c("scenario", "region", "sector", "year")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1078</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * emiss,</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1079</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  var = paste0("Revenue|Government|Tax|", sector))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1080</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1081</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1082</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_gov_revenue_all</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1083</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1084</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get overall carbon revenue.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1085</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords revenue rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1086</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return gov_revenue_all global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1087</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1088</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_gov_revenue_all = function() {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1089</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  gov_revenue_all &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1090</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    gov_revenue_sector %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1091</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(gov_revenue_sector %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1092</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::group_by(scenario, region, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1093</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::summarise(value = sum(value, na.rm =T))%&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1094</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1095</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::mutate(var = "Revenue|Government|Tax|Carbon",)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1096</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value/1000) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1097</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1098</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1099</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1100</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1101</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_prices_subsector</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1102</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1103</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get energy prices - primary, secondary, and final</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1104</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords prices rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1105</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return prices_subsector global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1106</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1107</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_prices_subsector = function() {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1108</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  prices_subsector &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1109</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "prices by sector") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1110</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(energy_prices_map %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1111</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::filter(is.na(subsector)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1112</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       unique, by = c("sector"), multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1113</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(rgcam::getQuery(prj, "costs by subsector") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1114</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::left_join(energy_prices_map %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1115</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                          unique,</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1116</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                        by = c("sector", "subsector"))) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1117</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!is.na(var)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1118</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # read in carbon content in kg C per GJ -&gt; convert to tC per GJ</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1119</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(carbon_content %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1120</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::filter(grepl("biomass", PrimaryFuelCO2Coef.name)),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1121</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                     by = c("region", "sector" = "PrimaryFuelCO2Coef.name")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1122</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(PrimaryFuelCO2Coef = PrimaryFuelCO2Coef / 1000) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1123</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::replace_na(list(PrimaryFuelCO2Coef = 0))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1124</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1125</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1126</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1127</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_energy_price_fragmented</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1128</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1129</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Get energy prices fragmented, join by region since price is different.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1130</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords prices process</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1131</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return energy_price_fragmented global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1132</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1133</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_energy_price_fragmented = function() {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1134</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  energy_price_fragmented &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1135</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    prices_subsector %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1136</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!is.na(var)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1137</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(rgcam::getQuery(prj, "CO2 prices") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1138</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::filter(!grepl("LUC", market)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1139</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::left_join(CO2_market, by = c("market"), multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1140</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::select(scenario, region, year, price_C = value), by = c("scenario", "region", "year")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1141</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::replace_na(list(price_C = 0)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1142</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # remove carbon price (subsidy) 1990$/tC from biomass 1975$/GJ</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1143</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(price_C = PrimaryFuelCO2Coef * price_C * conv_90USD_10USD,</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1144</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  value = value * unit_conv * conv_75USD_10USD + price_C) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1145</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1146</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1147</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1148</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_total_revenue</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1149</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1150</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Compute total revenue: total production * global price.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1151</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords revenue rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1152</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return total_revenue global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1153</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1154</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_total_revenue = function() {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1155</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  total_revenue &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1156</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "resource production") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1157</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(resource %in% c("coal", "crude oil", "natural gas")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1158</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, resource, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1159</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1160</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1161</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::rename(total_production = value) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1162</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(rgcam::getQuery(prj, "prices by sector") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1163</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::filter(sector %in% c("regional coal", "regional oil", "regional natural gas")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1164</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::mutate(resource = ifelse(sector == "regional coal", "coal", NA),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1165</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                     resource = ifelse(sector == "regional oil", "crude oil", resource),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1166</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                     resource = ifelse(sector == "regional natural gas", "natural gas", resource)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1167</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::rename(resource_price = value) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1168</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::group_by(scenario, resource, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1169</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::summarise(resource_price = mean(resource_price, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1170</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::ungroup(),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1171</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                     by = c("scenario", "year", "resource")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1172</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(total_production = total_production * GJ_to_EJ,</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1173</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  total_revenue = total_production * resource_price * conv_75USD_10USD)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1174</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1175</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1176</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_regional_emission</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1177</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1178</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Compute regional nonCO2 emission: regional production * nonCO2 coef.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1179</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords nonco2 rgcam::getQuery</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1180</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return regional_emission global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1181</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1182</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_regional_emission = function() {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1183</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  regional_emission &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1184</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    nonCO2_content %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1185</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(year == 2005) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1186</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::spread(Non.CO2, emiss.coef) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1187</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::rename(CH4.coef = CH4,</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1188</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  N2O.coef = N2O) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1189</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(CH4.coef = CH4.coef/1000000,</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1190</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  N2O.coef =  N2O.coef/1000000) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1191</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(region, resource, CH4.coef, N2O.coef) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1192</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(rgcam::getQuery(prj, "resource production")%&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1193</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::filter(resource %in% c("coal", "crude oil", "natural gas")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1194</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::rename(regional_production = value), by = c("region", "resource")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1195</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(regional_CH4emission = regional_production *CH4.coef * GJ_to_EJ,</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1196</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  regional_N2Oemission = regional_production *N2O.coef * GJ_to_EJ)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1197</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1198</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1199</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1200</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_energy_price_tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1201</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1202</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Bind regional oil, gas, coal prices with other energy prices</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1203</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords price rgcam::getQuery tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1204</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return energy_price global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1205</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1206</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_energy_price_tmp = function() {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1207</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  energy_price &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1208</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    energy_price_fragmented  %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1209</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1210</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1211</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1212</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1213</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_energy_price</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1214</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1215</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Compute final energy price</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1216</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords price process</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1217</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return energy_price_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1218</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1219</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_energy_price = function() {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1220</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  energy_price_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1221</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    energy_price %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1222</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(grepl("Residential\\|Electricity", var)|</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1223</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    grepl("Residential\\|Gases", var)|</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1224</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    grepl("Primary Energy\\|Coal", var)|</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1225</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    grepl("Primary Energy\\|Biomass", var)|</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1226</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    grepl("Primary Energy\\|Gas", var)|</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1227</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    grepl("Primary Energy\\|Oil", var)|</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1228</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    grepl("Secondary Energy\\|Electricity", var)|</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1229</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    grepl("Secondary Energy\\|Gases", var)|</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1230</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    grepl("Secondary Energy\\|Liquids\\|Biomass", var)|</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1231</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    grepl("Secondary Energy\\|Liquids\\|Oil", var)|</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1232</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    grepl("Secondary Energy\\|Solids\\|Coal", var))%&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1233</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(var = paste(var, "Index", sep = "|")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1234</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, var) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1235</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value/ value[year == 2020]) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1236</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1237</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1238</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(energy_price)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1239</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1240</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # average mean for global primary energy price</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1241</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  energy_price_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1242</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    energy_price_clean %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1243</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, var, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1244</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = mean(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1245</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1246</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(region = "World") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1247</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(energy_price_clean)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1248</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1249</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1250</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># Capacity and investment</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1251</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># ==============================================================================================</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1252</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"># electricity capacity</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1253</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">## first check global existing capacity from IEA, calculate cf for existing capacity</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1254</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1255</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_cf_iea_tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1256</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1257</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Calculate cf for existing capacity checking global existing capacity from IEA.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1258</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords capacity process tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1259</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return cf_iea global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1260</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1261</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_cf_iea_tmp = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1262</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  cf_iea &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1263</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    elec_gen_tech_clean %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1264</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(year == 2020, scenario == unique(elec_gen_tech_clean$scenario)[1]) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1265</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(var) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1266</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(EJ = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1267</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1268</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(iea_capacity %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1269</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::filter(period == 2020, scenario == "Current Policies Scenario") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1270</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::mutate(variable = gsub("Capacity\\|Electricity\\|CSP", "Capacity\\|Electricity\\|Solar\\|CSP", variable),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1271</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                     variable = gsub("Capacity\\|Electricity\\|Biomass", "Capacity\\|Electricity\\|Biomass\\|w/o CCS", variable),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1272</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                     variable = gsub("Capacity\\|Electricity\\|Coal", "Capacity\\|Electricity\\|Coal\\|w/o CCS", variable),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1273</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                     variable = gsub("Capacity\\|Electricity\\|Gas", "Capacity\\|Electricity\\|Gas\\|w/o CCS", variable),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1274</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                     variable = gsub("Capacity\\|Electricity\\|Oil", "Capacity\\|Electricity\\|Oil\\|w/o CCS", variable),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1275</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                     variable = gsub("Capacity", "Secondary Energy", variable)),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1276</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                     by = c("var" = "variable")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1277</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(cf = EJ / (value * hr_per_yr * EJ_to_GWh),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1278</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  cf = replace(cf, cf &gt; 1, 0.99)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1279</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!is.na(cf), !var %in% c("Secondary Energy|Electricity", "Secondary Energy|Electricity|Non-Biomass Renewables")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1280</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(capacity_map, by = "var", multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1281</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(technology, cf) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1282</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(region = "USA", vintage = 2020) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1283</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::complete(tidyr::nesting(technology, cf),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1284</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    vintage = c(1990, seq(2005, 2020, by = 5)),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1285</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    region = unique(cf_rgn$region))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1286</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1287</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1288</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_elec_cf_tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1289</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1290</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Calculate future capacity using GCAM</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1291</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords capacity process tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1292</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return elec_cf global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1293</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1294</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_elec_cf_tmp = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1295</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  elec_cf &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1296</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    cf_gcam %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1297</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(technology, cf = X2100) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1298</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(region = "USA", vintage = 2025) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1299</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::complete(tidyr::nesting(technology, cf),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1300</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    vintage = seq(2025, 2100, by = 5),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1301</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    region = unique(cf_rgn$region)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1302</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # first, replace regional cf for wind and solar</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1303</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(cf_rgn  %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1304</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::select(region, technology = stub.technology, vintage = year, cf.rgn = capacity.factor),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1305</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                     by = c("technology", "vintage", "region")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1306</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(cf = replace(cf, !is.na(cf.rgn), cf.rgn[!is.na(cf.rgn)])) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1307</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # second, use iea capacity consistent cf for existing vintage</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1308</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(cf_iea) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1309</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::complete(tidyr::nesting(technology, region), vintage = c(1990, seq(2005, 2100, by = 5))) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1310</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(technology, region) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1311</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(cf = approx_fun(vintage, cf, rule = 2)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1312</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1313</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!technology %in% c("existing coal", "add CCS retrofit"))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1314</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1315</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1316</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_elec_capacity_tot</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1317</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1318</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Calculate electricity total capacity</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1319</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords capacity process</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1320</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return elec_capacity_tot_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1321</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1322</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_elec_capacity_tot = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1323</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  elec_capacity_tot_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1324</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "elec gen by gen tech and cooling tech and vintage") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1325</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!output %in% c("electricity", "elect_td_bld" )) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1326</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::separate(technology, into = c("technology", "vintage"), sep = ",") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1327</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(vintage = as.integer(sub("year=", "", vintage)),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1328</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  output = gsub("elec_", "", output)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1329</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, technology = output, vintage, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1330</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1331</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1332</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(rgcam::getQuery(prj, "elec gen by gen tech and cooling tech and vintage") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1333</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::filter(output %in% c("electricity", "elect_td_bld" )) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1334</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       tidyr::separate(technology, into = c("technology", "vintage"), sep = ",") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1335</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::mutate(vintage = as.integer(sub("year=", "", vintage))) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1336</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::group_by(scenario, region, technology, vintage, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1337</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1338</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::ungroup()) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1339</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(elec_cf, by = c("region", "technology", "vintage")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1340</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(EJ = value) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1341</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    conv_EJ_GW() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1342</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, technology, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1343</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(gw, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1344</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1345</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(capacity_map %&gt;% dplyr::select(-output), by = c("technology"), multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1346</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!is.na(var)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1347</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * unit_conv,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1348</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  var = sub("Secondary Energy", "Capacity", var)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1349</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, var, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1350</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1351</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1352</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::complete(tidyr::nesting(scenario,region, year),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1353</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    var = unique(var),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1354</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    fill = list(value = 0)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1355</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1356</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1357</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1358</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_elec_capacity_add_tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1359</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1360</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Calculate added total capacity</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1361</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords capacity process tmp</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1362</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return elec_capacity_add global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1363</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1364</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_elec_capacity_add_tmp = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1365</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  elec_capacity_add &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1366</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "elec gen by gen tech and cooling tech and vintage") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1367</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!output %in% c("electricity", "elect_td_bld" )) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1368</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::separate(technology, into = c("technology", "vintage"), sep = ",") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1369</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(vintage = as.integer(sub("year=", "", vintage)),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1370</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  output = gsub("elec_", "", output)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1371</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, technology = output, vintage, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1372</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1373</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1374</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(rgcam::getQuery(prj, "elec gen by gen tech and cooling tech and vintage") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1375</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::filter(output %in% c("electricity", "elect_td_bld" )) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1376</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       tidyr::separate(technology, into = c("technology", "vintage"), sep = ",") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1377</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::mutate(vintage = as.integer(sub("year=", "", vintage))) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1378</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::group_by(scenario, region, technology, vintage, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1379</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1380</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::ungroup()) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1381</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(year == vintage, year &gt; 2015) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1382</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, technology, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1383</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1384</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1385</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # use GCAM cf for capacity additions</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1386</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(elec_cf %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1387</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::filter(!technology %in% c("coal (conv pul)")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1388</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::group_by(region, technology) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1389</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::mutate(cf = replace(cf, vintage &lt; 2025, cf[vintage == 2025])) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1390</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1391</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::bind_rows(elec_cf %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1392</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                          dplyr::filter(technology %in% c("coal (conv pul)" ))),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1393</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                     by = c("region", "technology", "year" = "vintage")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1394</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # use average annual additions</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1395</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(EJ = value / 5) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1396</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    conv_EJ_GW() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1397</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, technology, year) %&gt;% #</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1398</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(GW = sum(gw, na.rm = T), EJ = sum(EJ, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1399</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup()</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1400</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1401</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1402</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_elec_capacity_add</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1403</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1404</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Calculate added total capacity</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1405</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords capacity process</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1406</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return elec_capacity_add_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1407</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1408</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_elec_capacity_add = function() {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1409</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # check calculations for this</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1410</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  elec_capacity_add_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1411</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    elec_capacity_add %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1412</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(capacity_map %&gt;% dplyr::select(-output), by = c("technology"), multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1413</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!var %in% c("Secondary Energy|Electricity|Hydro",</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1414</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                              "Secondary Energy|Electricity|Storage Capacity")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1415</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = GW * unit_conv,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1416</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  var = sub("Secondary Energy", "Capacity Additions", var)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1417</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(elec_capacity_add%&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1418</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::left_join(capacity_map %&gt;% dplyr::select(-output), by = c("technology"), multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1419</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::filter(var == "Secondary Energy|Electricity|Storage Capacity") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1420</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::mutate(value = GW * 8760, # multiply by # of hours in a year</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1421</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                     var = sub("Secondary Energy", "Capacity Additions", var))) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1422</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, var, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1423</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1424</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1425</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::complete(tidyr::nesting(scenario,region, year),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1426</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    var = unique(var),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1427</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    fill = list(value = 0)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1428</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1429</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1430</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1431</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1432</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_elec_capital</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1433</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1434</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Calculate electricity capital</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1435</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords capital process</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1436</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return elec_capital_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1437</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1438</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_elec_capital = function() {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1439</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # Capital costs from GCAM in $1975/kw -&gt; convert to $2010/kw</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1440</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  elec_capital &lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1441</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    capital_gcam %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1442</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(region = "USA", scenario = Scenarios[1]) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1443</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(-sector) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1444</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::complete(tidyr::nesting(subsector, technology, year, capital.overnight),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1445</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    region = unique(cf_rgn$region), scenario = Scenarios) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1446</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # gw * 10e6 * $/kw / 10e9 = bill$</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1447</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = capital.overnight * conv_75USD_10USD) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1448</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(elec_gen_map %&gt;% dplyr::select(-output), by = c("subsector", "technology"), multiple = "all")</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1449</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1450</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  elec_capital_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1451</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    elec_capital %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1452</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!is.na(var), var != "Secondary Energy|Electricity|Electricity Storage") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1453</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * unit_conv,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1454</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  var = sub("Secondary Energy", "Capital Cost", var)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1455</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, var, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1456</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = mean(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1457</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1458</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1459</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1460</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # average mean for global tech capital cost</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1461</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  elec_capital_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1462</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    elec_capital_clean %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1463</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, var, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1464</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = mean(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1465</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1466</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(region = "World") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1467</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(elec_capital_clean)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1468</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1469</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1470</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_elec_investment</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1471</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1472</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Calculate electricity investment = annual capacity additions * capital costs</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1473</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords capital process</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1474</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return elec_investment_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1475</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1476</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_elec_investment = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1477</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  elec_investment_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1478</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # Electricity investment = annual capacity additions * capital costs</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1479</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    elec_capacity_add %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1480</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(capital_gcam %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1481</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::mutate(capital.overnight = replace(capital.overnight, technology=="wind_storage", capital.overnight[technology == "wind"]*.484),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1482</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                     capital.overnight = replace(capital.overnight, technology=="CSP_storage", 760 * conv_19USD_75USD),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1483</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                     capital.overnight = replace(capital.overnight, technology=="PV_storage", capital.overnight[technology == "PV"]*.518)),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1484</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                     by = c("technology", "year")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1485</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # gw * 10e6 * $/kw / 10e9 = bill$</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1486</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = GW * capital.overnight / 1000 * conv_75USD_10USD) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1487</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(elec_gen_map %&gt;% dplyr::select(-output), by = c("technology"), multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1488</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!is.na(var)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1489</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * unit_conv,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1490</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  var = sub("Secondary Energy", "Investment|Energy Supply", var)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1491</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, var, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1492</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1493</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1494</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1495</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1496</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1497</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_transmission_invest</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1498</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1499</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Calculate investment electricity transmission and distribution</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1500</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' scale 2020 number - average of other model results from Mcollion et al. 2018</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1501</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Need to convert 2015 to 2010 $</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1502</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords investment process</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1503</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return transmission_invest_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1504</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1505</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_transmission_invest = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1506</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  transmission2020 &lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1507</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    investment %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1508</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(Region == "World", Variable == "Energy Supply|Electricity|Transmission and Distribution", year == 2020) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1509</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * conv_15USD_10USD) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1510</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = mean(value, na.rm = T)) %&gt;% unlist</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1511</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1512</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  transmission_invest2020 &lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1513</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    elec_capacity_add_clean %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1514</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(var == "Capacity Additions|Electricity", year == 2020) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1515</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1516</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(share = value / sum(value, na.rm = T),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1517</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  invest = share * transmission2020)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1518</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1519</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  transmission_invest_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1520</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    elec_capacity_add_clean %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1521</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(var == "Capacity Additions|Electricity") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1522</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1523</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(rate = value / value[year == 2020]) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1524</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(transmission_invest2020 %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1525</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::select(scenario, region, invest),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1526</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                     by = c("scenario", "region")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1527</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = rate * invest, var = "Investment|Energy Supply|Electricity|Transmission and Distribution") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1528</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns)) #%&gt;%  dplyr::group_by(scenario, year) %&gt;% dplyr::summarise(value = sum(value)) %&gt;% tidyr::spread(year, value)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1529</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1530</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1531</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1532</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_CCS_invest</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1533</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1534</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Calculate CSS investment</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1535</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords investment process</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1536</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return CCS_invest_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1537</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1538</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_CCS_invest = function() {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1539</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # use last available year if 2040 is not present in the data</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1540</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  yy = ifelse(max(unique(co2_sequestration_clean$year)) &gt;= 2040, 2040, max(unique(co2_sequestration_clean$year)))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1541</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1542</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  CCS2040 &lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1543</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    investment %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1544</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(Region == "World", Variable == "CCS", year == yy) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1545</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * conv_15USD_10USD) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1546</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = mean(value, na.rm = T)) %&gt;% unlist()</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1547</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1548</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  CCS_invest2040 &lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1549</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    co2_sequestration_clean %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1550</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(var == "Carbon Sequestration|CCS", year == yy) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1551</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1552</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(share = value / sum(value, na.rm = T),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1553</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  invest = share * CCS2040 )</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1554</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1555</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  CCS_invest_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1556</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    co2_sequestration_clean %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1557</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(var == "Carbon Sequestration|CCS") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1558</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1559</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(rate = value / value[year == yy]) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1560</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(CCS_invest2040 %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1561</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::select(scenario, region, invest),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1562</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                     by = c("scenario", "region")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1563</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = rate * invest, var = "Investment|Energy Supply|CO2 Transport and Storage") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1564</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1565</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1566</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1567</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' get_resource_investment</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1568</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1569</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Calculate investment of resource production</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1570</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords investment process</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1571</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return resource_investment_clean global variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1572</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1573</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">get_resource_investment = function() {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1574</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # Investment of resource production</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1575</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  resource_addition &lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1576</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    rgcam::getQuery(prj, "resource production by tech and vintage") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1577</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(resource %in% c("coal", "natural gas", "crude oil", "unconventional oil")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1578</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::separate(technology, into = c("technology", "vintage"), sep = ",") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1579</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(vintage = as.integer(sub("year=", "", vintage))) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1580</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(year &gt; 2010) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1581</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(resource = sub("crude oil", "oil", resource),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1582</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  resource = sub("unconventional oil", "oil", resource)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1583</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, resource, region, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1584</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(production = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1585</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup()</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1586</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1587</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # scale 2015 number - average of other model results from Mcollion et al. 2018</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1588</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  extraction2015 &lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1589</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    investment %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1590</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(Region == "World", Variable == "Extraction and Conversion - Fossil Fuels", year == 2015) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1591</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * conv_15USD_10USD) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1592</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = mean(value, na.rm = T)) %&gt;% unlist</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1593</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1594</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  extraction2020 &lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1595</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    investment %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1596</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(Region == "World", Variable == "Extraction and Conversion - Fossil Fuels", year == 2020) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1597</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = value * conv_15USD_10USD) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1598</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = mean(value, na.rm = T)) %&gt;% unlist</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1599</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1600</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  resource_investment2015 &lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1601</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    resource_addition %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1602</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(year == 2015) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1603</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(rgcam::getQuery(prj, "regional primary energy prices") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1604</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::mutate(fuel = sub("regional ", "", fuel)),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1605</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                     by = c("scenario", "region", "year", "resource" = "fuel")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1606</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = production * value) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1607</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, resource, region) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1608</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1609</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1610</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1611</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(share = value / sum(value, na.rm = T),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1612</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  invest = share * extraction2015) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1613</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup()</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1614</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1615</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  resource_investment2020 &lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1616</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    resource_addition %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1617</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(year == 2020) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1618</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(rgcam::getQuery(prj, "regional primary energy prices") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1619</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::mutate(fuel = sub("regional ", "", fuel)),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1620</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                     by = c("scenario", "region", "year", "resource" = "fuel")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1621</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = production * value) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1622</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, resource, region) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1623</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1624</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1625</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1626</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(share = value / sum(value, na.rm = T),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1627</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  invest = share * extraction2020) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1628</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup()</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1629</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1630</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  resource_investment &lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1631</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    resource_addition %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1632</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(year!= 2020) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1633</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, resource) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1634</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(rate = production / production[year == 2015 &amp; region == "China"]) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1635</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1636</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(resource_investment2015 %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1637</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::filter(region == "China") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1638</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::select(scenario, resource, invest),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1639</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                     by = c('scenario', 'resource')) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1640</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(resource_addition %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1641</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::filter(year == 2020) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1642</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::group_by(scenario, resource) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1643</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::mutate(rate = production / production[region == "China"]) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1644</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1645</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                       dplyr::left_join(resource_investment2020 %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1646</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                          dplyr::filter(region == "China") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1647</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                          dplyr::select(scenario, resource, invest),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1648</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                        by =c('scenario', 'resource'))) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1649</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = invest * rate,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1650</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  resource = sub("coal", "Coal", resource),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1651</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  resource = sub("natural gas", "Gas", resource),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1652</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  resource = sub("oil", "Oil", resource),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1653</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  var = paste0('Investment|Energy Supply|Extraction|', resource)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1654</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1655</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1656</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  resource_investment_clean &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1657</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    resource_investment %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1658</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, region, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1659</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1660</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1661</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(var = 'Investment|Energy Supply|Extraction|Fossil') %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1662</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(long_columns)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1663</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(resource_investment) #%&gt;% dplyr::group_by(scenario, var, year) %&gt;% dplyr::summarise(value = sum(value)) %&gt;% tidyr::spread(year, value)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1664</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1665</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1666</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#########################################################################</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1667</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#                        BIND TO TEMPLATE FUNCTIONS                     #</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1668</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#########################################################################</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1669</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' do_bind_results</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1670</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1671</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Bind and save results</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1672</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords process</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1673</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return Save results in an output file.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1674</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1675</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">do_bind_results = function() {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1676</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  vars = variables[variables$required == TRUE, 'name']</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1677</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  GCAM_DATA &lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1678</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(lapply(vars, function(x) get(x))) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1679</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(region = gsub("Global", "World", region),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1680</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  region = gsub("global", "World", region))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1681</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1682</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # Calculate global total</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1683</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  GCAM_DATA_WORLD &lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1684</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    GCAM_DATA %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1685</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(region != "World", # excl. Temperature|Forcing|Concentration</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1686</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">           # excl. price and costs variables - already calculated global average</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1687</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">           !grepl("Price|Capital Cost", var)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1688</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, year, var) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1689</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1690</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1691</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(region = "World")</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1692</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1693</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  GCAM_DATA_wGLOBAL &lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1694</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    GCAM_DATA_WORLD %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1695</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::bind_rows(GCAM_DATA %&gt;% dplyr::filter(!(region == "World" &amp; var %in% unique(GCAM_DATA_WORLD$var)))) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1696</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::complete(tidyr::nesting(scenario, region, var), year = reporting_years) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1697</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::replace_na(list(value = 0))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1698</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1699</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # dplyr::filter to final_db_year</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1700</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  GCAM_DATA_wGLOBAL &lt;- GCAM_DATA_wGLOBAL %&gt;% dplyr::filter(year &lt;= final_db_year)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1701</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1702</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1703</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  final_data &lt;&lt;-</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1704</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    template %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1705</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::inner_join(GCAM_DATA_wGLOBAL %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1706</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                        na.omit %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1707</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                        tidyr::spread(year, value), by = c("Variable" = "var"),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1708</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                      multiple = "all") %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1709</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    #  dplyr::left_join(reporting_scen %&gt;% dplyr::select(GCAM_scenario, Scenario),</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1710</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    #            by = c("scenario" = "GCAM_scenario")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1711</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::rename(Region = region) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1712</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    #  dplyr::rename(Model = ?..Model) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1713</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::rename(Scenario = scenario) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1714</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(all_of(reporting_columns_fin)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1715</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(!is.na(Region)) # Drop variables we don't report</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1716</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1717</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1718</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#########################################################################</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1719</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#                       CHECKS AND VETTING FUNCTIONS                    #</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1720</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#########################################################################</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1721</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' do_check_trade</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1722</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1723</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Check global trade is zero.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1724</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords check</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1725</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return Verification message indicating if the process was successful.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1726</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1727</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">do_check_trade = function() {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1728</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # check global total is zero</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1729</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  trade &lt;- energy_trade_prod %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1730</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(energy_trade_supply, by = c("scenario", "resource", "region", "year")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1731</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(scenario, resource, year) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1732</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(production = sum(production, na.rm = T),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1733</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                     demand = sum(demand, na.rm = T)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1734</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1735</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(diff = (production - demand) / production,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1736</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  check = dplyr::if_else( abs(diff) &gt; 1, "Error", "OK" ))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1737</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1738</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (nrow(trade %&gt;% dplyr::filter( check == "Error")) &gt; 0) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1739</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    return('Trade flows: ERROR')</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1740</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1741</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  return('Trade flows: OK')</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1742</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1743</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1744</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1745</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1746</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' do_check_vetting</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1747</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1748</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Verify vetting and produce plot.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1749</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords check</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1750</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return Verification message indicating if the process was successful.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1751</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1752</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">do_check_vetting = function() {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1753</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # Check vetting results from SM</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1754</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  final_data_long_check &lt;- final_data %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1755</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::gather(year, value, -Model, -Variable, -Unit, -Scenario, -Region) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1756</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::rename(region = Region,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1757</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  variable = Variable) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1758</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::filter(Scenario == Scenarios[1]) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1759</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(year = as.integer(year))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1760</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1761</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  check_vet &lt;- global_vet_values %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1762</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(variable = adj_var, adj_var2, region, year, value, unit, range = Range) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1763</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::rename(unit_vet = unit,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1764</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  value_vet = value) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1765</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::left_join(final_data_long_check, by = c("variable", "region", "year")) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1766</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value = dplyr::if_else(grepl("Traditional", variable), value * -1, value)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1767</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(Scenario, variable = adj_var2, region, year, value, unit = Unit, value_vet, unit_vet, range) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1768</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # Adjust for Solar&amp;Wind and biomass</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1769</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::group_by(Scenario, variable, region, year, unit, unit_vet, range) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1770</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::summarise(value = sum(value),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1771</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                     value_vet = mean(value_vet)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1772</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::ungroup() %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1773</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # dplyr::mutate(unit_vet = as.character(unit_vet)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1774</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(value_vet = dplyr::if_else(unit_vet == "bcm", value_vet * bcm_to_EJ, value_vet),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1775</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  unit_vet = dplyr::if_else(unit_vet == "bcm", "EJ/yr", unit_vet)) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1776</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::mutate(diff = (value / value_vet) - 1,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1777</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                  check = dplyr::if_else(abs(diff) &gt; range, "Check", "OK"))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1778</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1779</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  check_vet_summary &lt;- check_vet %&gt;% dplyr::filter(check == "Check")</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1780</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1781</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  ## plot</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1782</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  check_vet_plot &lt;- check_vet %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1783</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dplyr::select(-year, -range, -diff, -check, -unit_vet) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1784</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::gather(type, value, -variable, -Scenario, -unit, -region)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1785</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1786</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  ggplot2::ggplot(check_vet_plot, ggplot2::aes(x = variable, y = value, fill = type)) +</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1787</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    ggplot2::geom_bar(stat = "identity", position = "dodge") +</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1788</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    ggplot2::facet_wrap(~variable, scales = "free") +</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1789</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    ggplot2::labs(x = "", y = "value") +</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1790</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    ggplot2::theme_classic()+</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1791</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    ggplot2::theme(axis.text.x = ggplot2::element_blank(),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1792</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                   legend.position = "bottom",</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1793</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                   strip.text = ggplot2::element_text(size = 5),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1794</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                   legend.title = ggplot2::element_blank())</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1795</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (!dir.exists(paste0(here::here(), "/output/figure/"))){</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1796</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dir.create(paste0(here::here(), "/output/figure/"))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1797</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1798</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  ggplot2::ggsave(paste0(here::here(), "/output/figure", "/vetting.tiff"), ggplot2::last_plot(), "tiff", dpi = 200)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1799</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1800</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if(nrow(check_vet_summary) &gt; 0){</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">1801</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    return('Vetting variables: ERROR')</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1802</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">1803</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  return('Vetting variables: OK')</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1804</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">1805</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div id="R/main.R" class="hidden">
              <table class="table-condensed">
                <tbody>
                  <tr class="never">
                    <td class="num">1</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">## Main functions of the package</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">2</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">library(usethis)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">3</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">library(magrittr)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">4</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">5</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' data_query</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">6</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">7</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Add nonCO2 large queries</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">8</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param db_path: path of the database</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">9</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param db_name: name of the database</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">10</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param prj_name: name of the project</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">11</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param scenarios: name of the scenarios to be considered</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">12</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param type: either 'nonCO2 emissions by region' or 'nonCO2 emissions by sector'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">13</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return dataframe with the data from the query</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">14</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">15</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">data_query = function(type, db_path, db_name, prj_name, scenarios) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">16</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  dt = data.frame()</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">17</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  xml &lt;- xml2::read_xml('inst/extdata/queries/queries_gcamreport_gcam6.0_nonCO2.xml')</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">18</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  qq &lt;- xml2::xml_find_first(xml, paste0("//*[@title='", type, "']"))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">19</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">20</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  for (sc in scenarios) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">21</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    for (emis in emissions_list) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">22</td>
                    <td class="coverage">144<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      qq_sec = gsub("current_emis", emis, qq)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">23</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">24</td>
                    <td class="coverage">144<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      prj_tmp = rgcam::addSingleQuery(</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">25</td>
                    <td class="coverage">144<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">        conn = rgcam::localDBConn(db_path,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">26</td>
                    <td class="coverage">144<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                  db_name,migabble = FALSE),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">27</td>
                    <td class="coverage">144<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">        proj = prj_name,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">28</td>
                    <td class="coverage">144<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">        qn = type,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">29</td>
                    <td class="coverage">144<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">        query = qq_sec,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">30</td>
                    <td class="coverage">144<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">        scenario = sc,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">31</td>
                    <td class="coverage">144<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">        regions = NULL,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">32</td>
                    <td class="coverage">144<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">        clobber = TRUE,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">33</td>
                    <td class="coverage">144<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">        transformations = NULL,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">34</td>
                    <td class="coverage">144<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">        saveProj = FALSE,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">35</td>
                    <td class="coverage">144<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">        warn.empty = FALSE</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">36</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      )</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">37</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">38</td>
                    <td class="coverage">144<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      tmp = data.frame(prj_tmp[[sc]][type])</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">39</td>
                    <td class="coverage">144<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      if (nrow(tmp) &gt; 0) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">40</td>
                    <td class="coverage">144<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">        dt = dplyr::bind_rows(dt,tmp)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">41</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      }</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">42</td>
                    <td class="coverage">144<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      rm(prj_tmp)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">43</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">44</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">45</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # Rename columns</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">46</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  new_colnames &lt;- sub(".*\\.(.*)", "\\1", names(dt))</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">47</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  names(dt) &lt;- new_colnames</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">48</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">49</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  return(dt)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">50</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">51</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">52</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">53</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' fill_queries</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">54</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">55</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Create a folder to save the datasets and file, in case it does not exist</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">56</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param db_path: path of the database</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">57</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param db_name: name of the database</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">58</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param prj_name: name of the project</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">59</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param scenarios: name of the scenarios to be considered</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">60</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return empty dataframes on the void queries of the project</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">61</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">62</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">fill_queries = function(db_path, db_name, prj_name, scenarios) {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">63</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # add nonCO2 queries manually (they are too big to use the usual method)</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">64</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  print('nonCO2 emissions by sector')</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">65</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  dt_sec = data_query('nonCO2 emissions by sector', db_path, db_name, prj_name, scenarios)</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">66</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  prj &lt;&lt;- rgcam::addQueryTable(project = prj_name, qdata = dt_sec,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">67</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                               queryname = 'nonCO2 emissions by sector', clobber = FALSE)</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">68</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  print('nonCO2 emissions by region')</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">69</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  dt_reg = data_query('nonCO2 emissions by region', db_path, db_name, prj_name, scenarios)</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">70</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  prj &lt;&lt;- rgcam::addQueryTable(project = prj_name, qdata = dt_reg,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">71</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                               queryname = 'nonCO2 emissions by region', clobber = FALSE)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">72</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">73</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # fix CO2 prices if needed</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">74</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (!'CO2 prices' %in% rgcam::listQueries(prj)) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">75</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    l = length(rgcam::listScenarios(prj))</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">76</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    dt = data.frame(Units = rep(NA,l),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">77</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    scenario = rgcam::listScenarios(prj),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">78</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    year = rep(NA,l),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">79</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    market = rep(NA,l),</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">80</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                    value = rep(NA,l))</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">81</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    prj &lt;&lt;- rgcam::addQueryTable(project = prj_name, qdata = dt,</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">82</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                 queryname = 'CO2 prices', clobber = FALSE)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">83</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">84</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">85</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">86</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">87</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">88</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' load_project</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">89</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">90</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Load specified project into the global environment</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">91</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param prj_name: name of the project</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">92</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return loaded project into global environment</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">93</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">94</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">load_project = function(prj_name) {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">95</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # load the project</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">96</td>
                    <td class="coverage">4<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  prj &lt;&lt;- rgcam::loadProject(prj_name)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">97</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">98</td>
                    <td class="coverage">4<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  Scenarios &lt;&lt;- rgcam::listScenarios(prj)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">99</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">100</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">101</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">102</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' create_project</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">103</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">104</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Create specified project and load it into the global environment</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">105</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param db_path: path of the database</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">106</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param db_name: name of the database</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">107</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param prj_name: name of the project</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">108</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param scenarios: name of the scenarios to be considered</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">109</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return loaded project into global environment</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">110</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">111</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">create_project = function(db_path, db_name, prj_name, scenarios) {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">112</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # # increase memory limit</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">113</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # memory.limit(5e6)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">114</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">115</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # create the project</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">116</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  conn &lt;- rgcam::localDBConn(db_path,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">117</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                             db_name,migabble = FALSE)</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">118</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  for (sc in scenarios) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">119</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    prj &lt;- rgcam::addScenario(conn,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">120</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                              prj_name,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">121</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                              sc,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">122</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                              paste0('inst/extdata/queries/','queries_gcamreport_gcam6.0_complete.xml'))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">123</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">124</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  prj &lt;&lt;- prj</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">125</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">126</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # fill with empty datatable the possible 'CO2 price' query and add 'nonCO2' large queries</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">127</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  fill_queries(db_path, db_name, prj_name, scenarios)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">128</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">129</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # save the project</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">130</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  rgcam::saveProject(prj, file = paste0(db_path, "/", db_name, '_', prj_name))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">131</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">132</td>
                    <td class="coverage">1<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  Scenarios &lt;&lt;- rgcam::listScenarios(prj)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">133</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">134</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">135</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">136</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' load_variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">137</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">138</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Recursive function to load the desired variable and its dependent variables</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">139</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param var: variable to be loaded</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">140</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @keywords internal</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">141</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return load variable</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">142</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">143</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">load_variable = function(var){</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">144</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">145</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # base case: if variable already loaded, return</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">146</td>
                    <td class="coverage">118<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (exists(var$name)) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">147</td>
                    <td class="coverage">70<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    return()</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">148</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">149</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">150</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # if the variable has dependencies, load them</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">151</td>
                    <td class="coverage">48<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (!is.na(var$dependencies)) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">152</td>
                    <td class="coverage">21<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    for (d in var$dependencies[[1]]) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">153</td>
                    <td class="coverage">30<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      load_variable(variables[which(variables$name == d),])</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">154</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">155</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">156</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">157</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # print the variable's name</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">158</td>
                    <td class="coverage">48<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  print(var$name)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">159</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">160</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # load the variable</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">161</td>
                    <td class="coverage">48<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  get(var$fun)()</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">162</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">163</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">164</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">165</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' run</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">166</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">167</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Main function. Interacts with the user to select the desired variables for the report, loads</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">168</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' them, saves them in an external output, runs the verifications, and informs the user about the</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">169</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' success of the whole process. Either the `project_path` should be specified, or the `db_path`</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">170</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' with all the related items, being `db_name`, `prj_name`, and `scenarios`.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">171</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param project_path: full path of the project with the project name. Possible extensions: .dat and .proj.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">172</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param db_path: full path of the database.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">173</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param db_name: name of the database.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">174</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param prj_name: name of the project.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">175</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param scenarios: name of the scenarios to be considered.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">176</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param final_year: final year of the data. By default = 2100.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">177</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param desired_variables: desired variables to have in the report. Considered 'All' by default.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">178</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Otherwise, specify a vector with all the desired options, being population_clean, GDP_MER_clean, GDP_PPP_clean,</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">179</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' global_temp_clean, forcing_clean, co2_concentration_clean, co2_emissions_clean, tot_co2_clean, co2_sequestration_clean,</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">180</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' ag_demand_clean, land_clean, primary_energy_clean, energy_trade_clean, elec_gen_tech_clean, elec_capacity_tot_clean,</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">181</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' elec_capacity_add_clean, se_gen_tech_clean, fe_sector_clean, energy_service_transportation_clean, energy_service_buildings_clean,</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">182</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' ag_prices_clean, industry_production_clean, elec_capital_clean, elec_investment_clean, transmission_invest_clean,</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">183</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' CCS_invest_clean, resource_investment_clean, nonco2_clean, co2_price_clean.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">184</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param save_output: if TRUE, save reporting data in CSV and XLSX formats. If FALSE, do not save data. If equals 'CSV' or 'XLSX',</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">185</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' data saved only in the specified format.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">186</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param file_name: file path and name of the saved data. Not used if data not saved. By default, saved in the same directory and with</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">187</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' the same name than the specified project_path, with 'iamc_report' tag. CSV and XLSX output. In case of specifing the path, do not</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">188</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' introduce the extension, it will be automatically added.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">189</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @param launch_ui: if TRUE, launch UI, Do not launch UI otherwise.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">190</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return saved? CSV and XLSX datafile with the desired variables &amp; launched? user interface.</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">191</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">192</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">run = function(project_path = NULL, db_path = NULL, db_name = NULL, prj_name = NULL, scenarios = NULL,</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">193</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">               final_year = 2100, desired_variables = 'All', save_output = TRUE, file_name = NULL, launch_ui = TRUE) {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">194</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">195</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # check that the paths are correctly specified</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">196</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (!is.null(project_path) &amp;&amp; (!is.null(db_path) || !is.null(db_name) || !is.null(prj_name) || !is.null(scenarios))) {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">197</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # stop and display error</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">198</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    stop('ERROR: Specify either a project or a database to extract the data from. Not both.')</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">199</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">200</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  } else if (!is.null(project_path)) {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">201</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # load project</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">202</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    print('Loading project...')</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">203</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    load_project(project_path)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">204</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">205</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  } else if (!is.null(db_path) || !is.null(db_name) || !is.null(prj_name) || !is.null(scenarios)) {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">206</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # create project if checks ok</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">207</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    print('Creating project...')</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">208</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">209</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # check that all the paths are specified</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">210</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    if (is.null(db_path) || is.null(db_name) || is.null(prj_name) || is.null(scenarios)) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">211</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">      null_items = c()</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">212</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">      not_null_items = c()</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">213</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">      for (item in c('db_path','db_name','prj_name','scenarios')) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">214</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">        if (is.null(eval(parse(text=item)))) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">215</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">          null_items = c(null_items, item)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">216</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">        } else {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">217</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">          not_null_items = c(not_null_items, item)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">218</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">        }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">219</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">220</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">221</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      # stop and display error</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">222</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">      if (length(not_null_items) &gt; 1) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">223</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">        stop("If ", paste(not_null_items, collapse = ', '), " are specified, ", paste(null_items, collapse = ', '), " must also be specified.")</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">224</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      } else {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">225</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">        stop("If ", paste(not_null_items, collapse = ', '), " is specified, ", paste(null_items, collapse = ', '), " must also be specified.")</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">226</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">227</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    } else {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">228</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      # create project</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">229</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">      create_project(db_path, db_name, prj_name, scenarios)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">230</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">231</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">232</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  } else {</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">233</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # stop and display error</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">234</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    stop('ERROR: Specify either a project or a database to extract the data from.')</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">235</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">236</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">237</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # make final_db_year as a global variable</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">238</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  final_db_year &lt;&lt;- final_year</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">239</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">240</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # final reporting columns:</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">241</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  reporting_columns_fin &lt;&lt;- append(c("Model", "Scenario", "Region", "Variable", "Unit"), as.character(seq(2005, final_db_year, by = 5)))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">242</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">243</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # desired variables to have in the report</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">244</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  variables_base &lt;&lt;- data.frame('name' =</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">245</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                  c('population_clean', 'GDP_MER_clean', 'GDP_PPP_clean',</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">246</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                    'global_temp_clean', 'forcing_clean', 'co2_concentration_clean',</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">247</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                    'co2_emissions_clean', 'tot_co2_clean', 'co2_sequestration_clean',</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">248</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                    'ag_demand_clean', 'land_clean',</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">249</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                    'primary_energy_clean', 'energy_trade_clean',</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">250</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                    'elec_gen_tech_clean', 'elec_capacity_tot_clean', 'elec_capacity_add_clean',</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">251</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                    'se_gen_tech_clean', 'fe_sector_clean',</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">252</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                    'energy_service_transportation_clean',</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">253</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                    'energy_service_buildings_clean',</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">254</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                    'ag_prices_clean', 'industry_production_clean',</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">255</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                    'elec_capital_clean',</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">256</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                    'elec_investment_clean', 'transmission_invest_clean', 'CCS_invest_clean', 'resource_investment_clean',</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">257</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                    'nonco2_clean',</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">258</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                    'co2_price_clean'),</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">259</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                'required' = TRUE,</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">260</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">                                stringsAsFactors = FALSE)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">261</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">262</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # consider only the desired variables</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">263</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (desired_variables == 'All') {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">264</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    variables &lt;&lt;- variables_base</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">265</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  } else {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">266</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    variables &lt;&lt;- dplyr::anti_join(variables_base, desired_variables, by = 'name')</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">267</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">268</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">269</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  print('Loading data, performing checks, and saving output...')</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">270</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">271</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # consider the dependencies and checking functions</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">272</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  variables &lt;&lt;- merge(variables,var_fun_map, by = 'name', all = TRUE) %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">273</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::replace_na(list(required = FALSE))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">274</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">275</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # for all desired variables, load the corresponding data</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">276</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  for (i in 1:nrow(variables)) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">277</td>
                    <td class="coverage">189<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    if (variables$required[i]) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">278</td>
                    <td class="coverage">87<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      load_variable(variables[i,])</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">279</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">280</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">281</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">282</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # set the default file_name based on the project_path or the db_path &amp; db_name</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">283</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (is.null(file_name)) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">284</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    if (!is.null(project_path)) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">285</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      file_name = gsub("\\.dat$", "", project_path)</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">286</td>
                    <td class="coverage">2<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      file_name = paste0(file_name,'_iamc_report')</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">287</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    } else {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">288</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">      file_name = paste0(db_path, "/", db_name, '_iamc_report')</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">289</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">290</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">291</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">292</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # bind and save results</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">293</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  do_bind_results()</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">294</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (save_output == TRUE || save_output %in% c('CSV','XLSX')) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">295</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    if (save_output == TRUE || 'CSV' %in% save_output) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">296</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      write.csv(final_data, file.path(paste0(file_name,'.csv')), row.names = FALSE)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">297</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    }</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">298</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    if (save_output == TRUE || 'XLSX' %in% save_output) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">299</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      writexl::write_xlsx(final_data, file.path(paste0(file_name,'.xlsx')))</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">300</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">301</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">302</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">303</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # checks, vetting, and errors summary</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">304</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  errors &lt;&lt;- c()</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">305</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">306</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  for (ch in variables$checks) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">307</td>
                    <td class="coverage">189<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    if (!is.na(ch)) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">308</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      for (d in ch[[1]]) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">309</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">        out = get(variables$fun[which(variables$name == d)])()</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">310</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">        errors &lt;&lt;- append(errors,out)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">311</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">      }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">312</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">313</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">314</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  vet = do_check_vetting()</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">315</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  print('The following checks have been performed:')</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">316</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  errors &lt;&lt;- append(errors,vet)</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">317</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  for (e in errors) {</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">318</td>
                    <td class="coverage">6<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    print(e)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">319</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">320</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">321</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # define the dataset for launching the ui</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">322</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  sdata &lt;&lt;- final_data %&gt;%</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">323</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    tidyr::separate(Variable, into = c('col1','col2','col3','col4','col5','col6','col7'), sep = "([\\|])", extra = 'merge', remove = FALSE)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">324</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">325</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # create vector of available years for launching the ui</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">326</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  available_years &lt;&lt;- as.numeric(names(sdata)[13:length(names(sdata))])</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">327</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">328</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # develop a nested list of the variables and regions for launching the ui</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">329</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  cols &lt;&lt;- unique(sdata[, grepl('col', names(sdata))])</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">330</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  tree_vars &lt;&lt;- do_mount_tree(cols,names(cols),selec=TRUE)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">331</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">332</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  tree_reg &lt;&lt;- do_mount_tree(reg_cont,names(reg_cont),selec=TRUE)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">333</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">334</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  # save a list of all variables</pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">335</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  all_vars &lt;&lt;- do_collapse_df(cols)</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">336</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="covered">
                    <td class="num">337</td>
                    <td class="coverage">3<em>x</em></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  if (launch_ui) {</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">338</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    print('Launching UI...')</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">339</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">340</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">    # launch ui</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">341</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">    launch_gcamreport_ui()</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">342</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">  }</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">343</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">344</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">345</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">346</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r"></pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">347</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' launch_gcamreport_ui</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">348</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#'</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">349</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' Launch shiny interactive ui</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">350</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @return launch shiny interactive ui</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">351</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">#' @export</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">352</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">launch_gcamreport_ui &lt;- function(){</pre>
                    </td>
                  </tr>
                  <tr class="missed">
                    <td class="num">353</td>
                    <td class="coverage">!</td>
                    <td class="col-sm-12">
                      <pre class="language-r">  shiny::runApp('inst/gcamreport_ui')</pre>
                    </td>
                  </tr>
                  <tr class="never">
                    <td class="num">354</td>
                    <td class="coverage"></td>
                    <td class="col-sm-12">
                      <pre class="language-r">}</pre>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <script>$('div#files pre').each(function(i, block) {
    hljs.highlightBlock(block);
});</script>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</body>
</html>
